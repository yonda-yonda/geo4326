import { night } from "./terminator";

it("night", () => {
  expect(night("2023-10-01T07:00:00Z")).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, 90],
            [180, 90],
            [180, -79.7709983900276],
            [179, -79.18554760864264],
            [178, -78.52634904757338],
            [177, -77.7790172179683],
            [176, -76.92523407143955],
            [175, -75.94133883504291],
            [174, -74.79628272231903],
            [173, -73.44860156335328],
            [172, -71.84183762333865],
            [171, -69.89746273985749],
            [170, -67.50370864549508],
            [169, -64.49764872843825],
            [168, -60.63635730744628],
            [167, -55.55191060111133],
            [166, -48.690096530375],
            [165, -39.26858551146723],
            [164, -26.428397629222886],
            [163, -9.999485865075615],
            [162, 8.218986678868708],
            [161, 24.94571450474457],
            [160, 38.157684319091686],
            [159, 47.88295775971782],
            [158, 54.96053965485513],
            [157, 60.193207309158254],
            [156, 64.15705534972803],
            [155, 67.23560136277177],
            [154, 69.6818742298773],
            [153, 71.66523653774703],
            [152, 73.30159787643291],
            [151, 74.6722043863361],
            [150, 75.8353385308124],
            [149, 76.83371770780725],
            [148, 77.69927026568689],
            [147, 78.45628683509122],
            [146, 79.12354492554192],
            [145, 79.71577090206608],
            [144, 80.24466538864735],
            [143, 80.71963528752589],
            [142, 81.14832493868592],
            [141, 81.53700735793367],
            [140, 81.89087642015427],
            [139, 82.21426786228864],
            [138, 82.51082842259875],
            [137, 82.78364670168747],
            [136, 83.03535543270021],
            [135, 83.2682121579767],
            [134, 83.48416342735905],
            [133, 83.68489629970907],
            [132, 83.87187997274751],
            [131, 84.046399672651],
            [130, 84.20958442639748],
            [129, 84.36242996345283],
            [128, 84.50581771212923],
            [127, 84.64053064391341],
            [126, 84.76726655788046],
            [125, 84.88664927381892],
            [124, 84.99923810736854],
            [123, 85.105535926374],
            [122, 85.20599602966783],
            [121, 85.30102804382608],
            [120, 85.39100299725483],
            [119, 85.47625770212753],
            [118, 85.557098551587],
            [117, 85.63380482101323],
            [116, 85.70663154709072],
            [115, 85.77581204615461],
            [114, 85.84156012327854],
            [113, 85.90407201535105],
            [112, 85.96352810461168],
            [111, 86.02009443351467],
            [110, 86.07392404713133],
            [109, 86.12515818542155],
            [108, 86.17392734445575],
            [107, 86.22035222294224],
            [106, 86.2645445681173],
            [105, 86.30660793311414],
            [104, 86.34663835628027],
            [103, 86.38472497151437],
            [102, 86.42095055750009],
            [101, 86.45539203269331],
            [100, 86.4881209020456],
            [99, 86.51920366069349],
            [98, 86.54870215919546],
            [97, 86.57667393433765],
            [96, 86.60317250904552],
            [95, 86.62824766451537],
            [94, 86.65194568731441],
            [93, 86.67430959387778],
            [92, 86.69537933455035],
            [91, 86.71519197907703],
            [90, 86.73378188522885],
            [89, 86.75118085206263],
            [88, 86.76741825914458],
            [87, 86.78252119291938],
            [86, 86.79651456127502],
            [85, 86.80942119723586],
            [84, 86.82126195261264],
            [83, 86.83205578234302],
            [82, 86.84181982017324],
            [81, 86.85056944625485],
            [80, 86.85831834716096],
            [79, 86.865078568765],
            [78, 86.87086056236603],
            [77, 86.87567322439263],
            [76, 86.87952392996822],
            [75, 86.8824185605743],
            [74, 86.88436152600569],
            [73, 86.88535578077034],
            [72, 86.88540283504747],
            [71, 86.88450276027955],
            [70, 86.88265418943665],
            [69, 86.8798543119551],
            [68, 86.8760988633154],
            [67, 86.87138210918776],
            [66, 86.86569682403503],
            [65, 86.85903426402476],
            [64, 86.85138413406044],
            [63, 86.8427345486995],
            [62, 86.83307198668],
            [61, 86.8223812387297],
            [60, 86.81064534827772],
            [59, 86.79784554463279],
            [58, 86.78396116812971],
            [57, 86.76896958667685],
            [56, 86.75284610306308],
            [55, 86.73556385229807],
            [54, 86.71709368816798],
            [53, 86.69740405808433],
            [52, 86.67646086518876],
            [51, 86.65422731654503],
            [50, 86.63066375610438],
            [49, 86.6057274809635],
            [48, 86.57937253924763],
            [47, 86.55154950773861],
            [46, 86.52220524712482],
            [45, 86.49128263247465],
            [44, 86.45872025621908],
            [43, 86.42445210056681],
            [42, 86.38840717586092],
            [41, 86.35050912090612],
            [40, 86.31067576074514],
            [39, 86.26881861672223],
            [38, 86.22484236293232],
            [37, 86.17864422229124],
            [36, 86.13011329445871],
            [35, 86.07912980667025],
            [34, 86.02556427715794],
            [33, 85.96927657921917],
            [32, 85.91011489208472],
            [31, 85.84791452247704],
            [30, 85.78249657806967],
            [29, 85.71366647086747],
            [28, 85.64121222471339],
            [27, 85.56490255655672],
            [26, 85.4844846956162],
            [25, 85.39968189792492],
            [24, 85.31019060568391],
            [23, 85.215677191033],
            [22, 85.1157742118387],
            [21, 85.01007609234011],
            [20, 84.89813412327285],
            [19, 84.77945065348037],
            [18, 84.65347231682031],
            [17, 84.51958210280237],
            [16, 84.37709003478206],
            [15, 84.22522216292006],
            [14, 84.06310750682367],
            [13, 83.8897624898479],
            [12, 83.70407228671925],
            [11, 83.50476834922902],
            [10, 83.29040116848459],
            [9, 83.05930705884005],
            [8, 82.80956738312081],
            [7, 82.53895814549749],
            [6, 82.2448872060869],
            [5, 81.92431544542295],
            [4, 81.57365691730892],
            [3, 81.18865121085223],
            [2, 80.76419864770443],
            [1, 80.29414518593956],
            [0, 79.7709983900276],
            [-1, 79.18554760864264],
            [-2, 78.52634904757333],
            [-3, 77.7790172179683],
            [-4, 76.92523407143955],
            [-5, 75.94133883504304],
            [-6, 74.79628272231903],
            [-7, 73.44860156335335],
            [-8, 71.84183762333865],
            [-9, 69.89746273985752],
            [-10, 67.50370864549497],
            [-11, 64.49764872843828],
            [-12, 60.63635730744654],
            [-13, 55.55191060111137],
            [-14, 48.690096530375065],
            [-15, 39.26858551146786],
            [-16, 26.428397629222985],
            [-17, 9.999485865076645],
            [-18, -8.21898667886858],
            [-19, -24.94571450474446],
            [-20, -38.15768431909103],
            [-21, -47.882957759717755],
            [-22, -54.96053965485509],
            [-23, -60.193207309157756],
            [-24, -64.15705534972801],
            [-25, -67.23560136277163],
            [-26, -69.68187422987728],
            [-27, -71.665236537747],
            [-28, -73.30159787643284],
            [-29, -74.6722043863361],
            [-30, -75.83533853081232],
            [-31, -76.83371770780725],
            [-32, -77.69927026568689],
            [-33, -78.45628683509126],
            [-34, -79.12354492554192],
            [-35, -79.71577090206604],
            [-36, -80.24466538864735],
            [-37, -80.71963528752589],
            [-38, -81.14832493868589],
            [-39, -81.53700735793367],
            [-40, -81.89087642015427],
            [-41, -82.21426786228864],
            [-42, -82.51082842259875],
            [-43, -82.78364670168746],
            [-44, -83.03535543270021],
            [-45, -83.2682121579767],
            [-46, -83.48416342735901],
            [-47, -83.68489629970907],
            [-48, -83.87187997274751],
            [-49, -84.04639967265098],
            [-50, -84.20958442639748],
            [-51, -84.36242996345283],
            [-52, -84.50581771212921],
            [-53, -84.6405306439134],
            [-54, -84.76726655788046],
            [-55, -84.88664927381892],
            [-56, -84.99923810736851],
            [-57, -85.105535926374],
            [-58, -85.20599602966783],
            [-59, -85.30102804382608],
            [-60, -85.39100299725483],
            [-61, -85.47625770212753],
            [-62, -85.557098551587],
            [-63, -85.6338048210132],
            [-64, -85.70663154709074],
            [-65, -85.77581204615461],
            [-66, -85.84156012327854],
            [-67, -85.90407201535105],
            [-68, -85.96352810461168],
            [-69, -86.02009443351467],
            [-70, -86.07392404713133],
            [-71, -86.12515818542155],
            [-72, -86.17392734445575],
            [-73, -86.22035222294224],
            [-74, -86.2645445681173],
            [-75, -86.30660793311414],
            [-76, -86.34663835628025],
            [-77, -86.38472497151437],
            [-78, -86.42095055750009],
            [-79, -86.45539203269331],
            [-80, -86.4881209020456],
            [-81, -86.51920366069349],
            [-82, -86.54870215919546],
            [-83, -86.57667393433765],
            [-84, -86.60317250904552],
            [-85, -86.62824766451537],
            [-86, -86.65194568731441],
            [-87, -86.67430959387778],
            [-88, -86.69537933455035],
            [-89, -86.71519197907703],
            [-90, -86.73378188522885],
            [-91, -86.75118085206263],
            [-92, -86.76741825914458],
            [-93, -86.78252119291938],
            [-94, -86.79651456127502],
            [-95, -86.80942119723586],
            [-96, -86.82126195261264],
            [-97, -86.83205578234302],
            [-98, -86.84181982017324],
            [-99, -86.85056944625485],
            [-100, -86.85831834716097],
            [-101, -86.865078568765],
            [-102, -86.87086056236603],
            [-103, -86.87567322439263],
            [-104, -86.87952392996822],
            [-105, -86.8824185605743],
            [-106, -86.88436152600569],
            [-107, -86.88535578077034],
            [-108, -86.88540283504747],
            [-109, -86.88450276027955],
            [-110, -86.88265418943665],
            [-111, -86.8798543119551],
            [-112, -86.8760988633154],
            [-113, -86.87138210918776],
            [-114, -86.86569682403503],
            [-115, -86.85903426402476],
            [-116, -86.85138413406044],
            [-117, -86.8427345486995],
            [-118, -86.83307198668],
            [-119, -86.8223812387297],
            [-120, -86.81064534827772],
            [-121, -86.79784554463279],
            [-122, -86.78396116812971],
            [-123, -86.76896958667685],
            [-124, -86.75284610306308],
            [-125, -86.73556385229807],
            [-126, -86.71709368816798],
            [-127, -86.69740405808433],
            [-128, -86.67646086518876],
            [-129, -86.65422731654503],
            [-130, -86.63066375610438],
            [-131, -86.6057274809635],
            [-132, -86.57937253924763],
            [-133, -86.55154950773861],
            [-134, -86.52220524712482],
            [-135, -86.49128263247465],
            [-136, -86.45872025621908],
            [-137, -86.42445210056681],
            [-138, -86.38840717586092],
            [-139, -86.35050912090612],
            [-140, -86.31067576074514],
            [-141, -86.26881861672223],
            [-142, -86.22484236293232],
            [-143, -86.17864422229124],
            [-144, -86.13011329445871],
            [-145, -86.07912980667028],
            [-146, -86.02556427715794],
            [-147, -85.96927657921917],
            [-148, -85.91011489208472],
            [-149, -85.84791452247701],
            [-150, -85.78249657806967],
            [-151, -85.71366647086747],
            [-152, -85.64121222471339],
            [-153, -85.56490255655672],
            [-154, -85.48448469561619],
            [-155, -85.39968189792492],
            [-156, -85.31019060568391],
            [-157, -85.215677191033],
            [-158, -85.1157742118387],
            [-159, -85.01007609234011],
            [-160, -84.89813412327285],
            [-161, -84.77945065348037],
            [-162, -84.65347231682031],
            [-163, -84.5195821028024],
            [-164, -84.37709003478206],
            [-165, -84.22522216292006],
            [-166, -84.06310750682367],
            [-167, -83.8897624898479],
            [-168, -83.70407228671925],
            [-169, -83.50476834922902],
            [-170, -83.29040116848459],
            [-171, -83.05930705884005],
            [-172, -82.80956738312081],
            [-173, -82.53895814549749],
            [-174, -82.2448872060869],
            [-175, -81.92431544542295],
            [-176, -81.57365691730894],
            [-177, -81.18865121085223],
            [-178, -80.76419864770443],
            [-179, -80.29414518593957],
            [-180, -79.77099839002757],
            [-180, 90],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2023-10-01T07:00:00.000Z", elevation: 0 },
    type: "Feature",
  });
  expect(night("2023-10-01T07:00:00Z", { division: 180 })).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, 90],
            [180, 90],
            [180, -79.7709983900276],
            [178, -78.52634904757338],
            [176, -76.92523407143955],
            [174, -74.79628272231903],
            [172, -71.84183762333865],
            [170, -67.50370864549508],
            [168, -60.63635730744628],
            [166, -48.690096530375],
            [164, -26.428397629222886],
            [162, 8.218986678868708],
            [160, 38.157684319091686],
            [158, 54.96053965485513],
            [156, 64.15705534972803],
            [154, 69.6818742298773],
            [152, 73.30159787643291],
            [150, 75.8353385308124],
            [148, 77.69927026568689],
            [146, 79.12354492554192],
            [144, 80.24466538864735],
            [142, 81.14832493868592],
            [140, 81.89087642015427],
            [138, 82.51082842259875],
            [136, 83.03535543270021],
            [134, 83.48416342735905],
            [132, 83.87187997274751],
            [130, 84.20958442639748],
            [128, 84.50581771212923],
            [126, 84.76726655788046],
            [124, 84.99923810736854],
            [122, 85.20599602966783],
            [120, 85.39100299725483],
            [118, 85.557098551587],
            [116, 85.70663154709072],
            [114, 85.84156012327854],
            [112, 85.96352810461168],
            [110, 86.07392404713133],
            [108, 86.17392734445575],
            [106, 86.2645445681173],
            [104, 86.34663835628027],
            [102, 86.42095055750009],
            [100, 86.4881209020456],
            [98, 86.54870215919546],
            [96, 86.60317250904552],
            [94, 86.65194568731441],
            [92, 86.69537933455035],
            [90, 86.73378188522885],
            [88, 86.76741825914458],
            [86, 86.79651456127502],
            [84, 86.82126195261264],
            [82, 86.84181982017324],
            [80, 86.85831834716096],
            [78, 86.87086056236603],
            [76, 86.87952392996822],
            [74, 86.88436152600569],
            [72, 86.88540283504747],
            [70, 86.88265418943665],
            [68, 86.8760988633154],
            [66, 86.86569682403503],
            [64, 86.85138413406044],
            [62, 86.83307198668],
            [60, 86.81064534827772],
            [58, 86.78396116812971],
            [56, 86.75284610306308],
            [54, 86.71709368816798],
            [52, 86.67646086518876],
            [50, 86.63066375610438],
            [48, 86.57937253924763],
            [46, 86.52220524712482],
            [44, 86.45872025621908],
            [42, 86.38840717586092],
            [40, 86.31067576074514],
            [38, 86.22484236293232],
            [36, 86.13011329445871],
            [34, 86.02556427715794],
            [32, 85.91011489208472],
            [30, 85.78249657806967],
            [28, 85.64121222471339],
            [26, 85.4844846956162],
            [24, 85.31019060568391],
            [22, 85.1157742118387],
            [20, 84.89813412327285],
            [18, 84.65347231682031],
            [16, 84.37709003478206],
            [14, 84.06310750682367],
            [12, 83.70407228671925],
            [10, 83.29040116848459],
            [8, 82.80956738312081],
            [6, 82.2448872060869],
            [4, 81.57365691730892],
            [2, 80.76419864770443],
            [0, 79.7709983900276],
            [-2, 78.52634904757333],
            [-4, 76.92523407143955],
            [-6, 74.79628272231903],
            [-8, 71.84183762333865],
            [-10, 67.50370864549497],
            [-12, 60.63635730744654],
            [-14, 48.690096530375065],
            [-16, 26.428397629222985],
            [-18, -8.21898667886858],
            [-20, -38.15768431909103],
            [-22, -54.96053965485509],
            [-24, -64.15705534972801],
            [-26, -69.68187422987728],
            [-28, -73.30159787643284],
            [-30, -75.83533853081232],
            [-32, -77.69927026568689],
            [-34, -79.12354492554192],
            [-36, -80.24466538864735],
            [-38, -81.14832493868589],
            [-40, -81.89087642015427],
            [-42, -82.51082842259875],
            [-44, -83.03535543270021],
            [-46, -83.48416342735901],
            [-48, -83.87187997274751],
            [-50, -84.20958442639748],
            [-52, -84.50581771212921],
            [-54, -84.76726655788046],
            [-56, -84.99923810736851],
            [-58, -85.20599602966783],
            [-60, -85.39100299725483],
            [-62, -85.557098551587],
            [-64, -85.70663154709074],
            [-66, -85.84156012327854],
            [-68, -85.96352810461168],
            [-70, -86.07392404713133],
            [-72, -86.17392734445575],
            [-74, -86.2645445681173],
            [-76, -86.34663835628025],
            [-78, -86.42095055750009],
            [-80, -86.4881209020456],
            [-82, -86.54870215919546],
            [-84, -86.60317250904552],
            [-86, -86.65194568731441],
            [-88, -86.69537933455035],
            [-90, -86.73378188522885],
            [-92, -86.76741825914458],
            [-94, -86.79651456127502],
            [-96, -86.82126195261264],
            [-98, -86.84181982017324],
            [-100, -86.85831834716097],
            [-102, -86.87086056236603],
            [-104, -86.87952392996822],
            [-106, -86.88436152600569],
            [-108, -86.88540283504747],
            [-110, -86.88265418943665],
            [-112, -86.8760988633154],
            [-114, -86.86569682403503],
            [-116, -86.85138413406044],
            [-118, -86.83307198668],
            [-120, -86.81064534827772],
            [-122, -86.78396116812971],
            [-124, -86.75284610306308],
            [-126, -86.71709368816798],
            [-128, -86.67646086518876],
            [-130, -86.63066375610438],
            [-132, -86.57937253924763],
            [-134, -86.52220524712482],
            [-136, -86.45872025621908],
            [-138, -86.38840717586092],
            [-140, -86.31067576074514],
            [-142, -86.22484236293232],
            [-144, -86.13011329445871],
            [-146, -86.02556427715794],
            [-148, -85.91011489208472],
            [-150, -85.78249657806967],
            [-152, -85.64121222471339],
            [-154, -85.48448469561619],
            [-156, -85.31019060568391],
            [-158, -85.1157742118387],
            [-160, -84.89813412327285],
            [-162, -84.65347231682031],
            [-164, -84.37709003478206],
            [-166, -84.06310750682367],
            [-168, -83.70407228671925],
            [-170, -83.29040116848459],
            [-172, -82.80956738312081],
            [-174, -82.2448872060869],
            [-176, -81.57365691730894],
            [-178, -80.76419864770443],
            [-180, -79.77099839002757],
            [-180, 90],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2023-10-01T07:00:00.000Z", elevation: 0 },
    type: "Feature",
  });
  expect(night("2024-06-24T05:50:00+09:00")).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, -90],
            [180, -90],
            [180, -57.046579104057834],
            [179, -56.526574047315385],
            [178, -55.983632593544044],
            [177, -55.41667571897455],
            [176, -54.824563849173835],
            [175, -54.20609435173885],
            [174, -53.559999170242776],
            [173, -52.8849426741749],
            [172, -52.17951981693307],
            [171, -51.4422547143194],
            [170, -50.671599779797205],
            [169, -49.86593558031926],
            [168, -49.02357160806297],
            [167, -48.14274819902257],
            [166, -47.221639869006914],
            [165, -46.2583603807401],
            [164, -45.250969901586885],
            [163, -44.197484658391474],
            [162, -43.095889541662935],
            [161, -41.94415415239536],
            [160, -40.74025281633856],
            [159, -39.48218910607815],
            [158, -38.16802540253217],
            [157, -36.7959179841534],
            [156, -35.364158042164846],
            [155, -33.871218870059096],
            [154, -32.315809251494144],
            [153, -30.69693275997041],
            [152, -29.013952277290187],
            [151, -27.26665853382564],
            [150, -25.45534088107062],
            [149, -23.580857850269332],
            [148, -21.64470437381115],
            [147, -19.649071913768687],
            [146, -17.596897240293767],
            [145, -15.491895332286084],
            [144, -13.338571937949313],
            [143, -11.14221182359829],
            [142, -8.90883970978295],
            [141, -6.645152341412596],
            [140, -4.358421986190864],
            [139, -2.056373747901839],
            [138, 0.2529588040636714],
            [137, 2.561393309025803],
            [136, 4.860765823579822],
            [135, 7.143097092235184],
            [134, 9.400749496075493],
            [133, 11.626567161052987],
            [132, 13.813993223827133],
            [131, 15.957160205899267],
            [130, 18.050951578139927],
            [129, 20.091034653494777],
            [128, 22.07386671629691],
            [127, 23.99667764363761],
            [126, 25.857433137801696],
            [125, 27.654783080082513],
            [124, 29.387999499526956],
            [123, 31.056908320173722],
            [122, 32.6618185118377],
            [121, 34.20345162070922],
            [120, 35.68287397857562],
            [119, 37.10143324382325],
            [118, 38.46070035273746],
            [117, 39.7624174766834],
            [116, 41.00845219579081],
            [115, 42.20075780892442],
            [114, 43.34133949298934],
            [113, 44.43222588888689],
            [112, 45.475445612799085],
            [111, 46.473008156712],
            [110, 47.42688863946274],
            [109, 48.33901588928283],
            [108, 49.2112633729184],
            [107, 50.04544252884875],
            [106, 50.84329810839285],
            [105, 51.606505175379986],
            [104, 52.33666746040258],
            [103, 53.03531680810037],
            [102, 53.70391349467202],
            [101, 54.343847227530986],
            [100, 54.956438669663484],
            [99, 55.542941357951186],
            [98, 56.10454390775697],
            [97, 56.64237241575527],
            [96, 57.15749298968394],
            [95, 57.65091434774962],
            [94, 58.123590442175164],
            [93, 58.57642307115504],
            [92, 59.01026445156366],
            [91, 59.42591973140301],
            [90, 59.82414942640036],
            [89, 60.2056717695712],
            [88, 60.57116496611467],
            [87, 60.92126934885207],
            [86, 61.256589431675145],
            [85, 61.57769586024448],
            [84, 61.885127260553965],
            [83, 62.179391987029064],
            [82, 62.46096977261478],
            [81, 62.73031328388353],
            [80, 62.98784958459534],
            [79, 63.2339815114078],
            [78, 63.46908896558855],
            [77, 63.6935301246525],
            [76, 63.90764257784809],
            [75, 64.11174438936682],
            [74, 64.30613509306173],
            [73, 64.49109662234198],
            [72, 64.66689417877139],
            [71, 64.83377704274491],
            [70, 64.99197932945337],
            [69, 65.14172069317868],
            [68, 65.28320698278974],
            [67, 65.41663085113905],
            [66, 65.54217232089124],
            [65, 65.6599993091484],
            [64, 65.77026811307734],
            [63, 65.87312385858625],
            [62, 65.96870091394892],
            [61, 66.05712327012859],
            [60, 66.13850488941455],
            [59, 66.21295002385152],
            [58, 66.28055350481222],
            [57, 66.34140100494187],
            [56, 66.39556927358522],
            [55, 66.4431263466926],
            [54, 66.48413173209363],
            [53, 66.51863657092127],
            [52, 66.54668377586775],
            [51, 66.56830814685566],
            [50, 66.58353646461104],
            [49, 66.592387562533],
            [48, 66.59487237716155],
            [47, 66.59099397745625],
            [46, 66.58074757300844],
            [45, 66.56412050122186],
            [44, 66.5410921934075],
            [43, 66.51163411965018],
            [42, 66.47570971221546],
            [41, 66.43327426717408],
            [40, 66.38427482383028],
            [39, 66.32865002144551],
            [38, 66.26632993265349],
            [37, 66.19723587286289],
            [36, 66.12128018484222],
            [35, 66.03836599757514],
            [34, 65.94838695836467],
            [33, 65.85122693705054],
            [32, 65.74675970108514],
            [31, 65.63484856008867],
            [30, 65.5153459783758],
            [29, 65.38809315381035],
            [28, 65.25291956120432],
            [27, 65.10964245833127],
            [26, 64.95806635247197],
            [25, 64.79798242525327],
            [24, 64.62916791337854],
            [23, 64.45138544268235],
            [22, 64.2643823127718],
            [21, 64.06788972934675],
            [20, 63.86162198111961],
            [19, 63.64527555808808],
            [18, 63.41852820775168],
            [17, 63.181037925712985],
            [16, 62.93244187696791],
            [15, 62.6723552440771],
            [14, 62.400369998330156],
            [13, 62.116053589972736],
            [12, 61.81894755358456],
            [11, 61.508566024780286],
            [10, 61.184394164584525],
            [9, 60.845886488123035],
            [8, 60.492465094710056],
            [7, 60.1235177970287],
            [6, 59.73839614794222],
            [5, 59.33641336459146],
            [4, 58.91684215088979],
            [3, 58.47891242139856],
            [2, 58.02180893194041],
            [1, 57.544668825296434],
            [0, 57.046579104057834],
            [-1, 56.526574047315385],
            [-2, 55.983632593544044],
            [-3, 55.41667571897459],
            [-4, 54.82456384917384],
            [-5, 54.206094351738855],
            [-6, 53.55999917024282],
            [-7, 52.8849426741749],
            [-8, 52.17951981693307],
            [-9, 51.44225471431941],
            [-10, 50.67159977979721],
            [-11, 49.8659355803193],
            [-12, 49.02357160806297],
            [-13, 48.14274819902257],
            [-14, 47.22163986900692],
            [-15, 46.258360380740115],
            [-16, 45.25096990158695],
            [-17, 44.19748465839148],
            [-18, 43.09588954166296],
            [-19, 41.944154152395434],
            [-20, 40.740252816338554],
            [-21, 39.482189106078216],
            [-22, 38.16802540253221],
            [-23, 36.79591798415343],
            [-24, 35.36415804216491],
            [-25, 33.87121887005907],
            [-26, 32.31580925149417],
            [-27, 30.69693275997044],
            [-28, 29.013952277290223],
            [-29, 27.266658533825723],
            [-30, 25.455340881070605],
            [-31, 23.580857850269375],
            [-32, 21.644704373811194],
            [-33, 19.649071913768672],
            [-34, 17.59689724029386],
            [-35, 15.491895332286125],
            [-36, 13.338571937949355],
            [-37, 11.142211823598332],
            [-38, 8.908839709782937],
            [-39, 6.6451523414126985],
            [-40, 4.358421986190909],
            [-41, 2.056373747901884],
            [-42, -0.252958804063567],
            [-43, -2.561393309025816],
            [-44, -4.8607658235797775],
            [-45, -7.14309709223514],
            [-46, -9.400749496075449],
            [-47, -11.626567161052888],
            [-48, -13.813993223827147],
            [-49, -15.957160205899227],
            [-50, -18.050951578139887],
            [-51, -20.091034653494738],
            [-52, -22.07386671629682],
            [-53, -23.996677643637668],
            [-54, -25.85743313780166],
            [-55, -27.654783080082392],
            [-56, -29.387999499526966],
            [-57, -31.056908320173644],
            [-58, -32.661818511837666],
            [-59, -34.20345162070919],
            [-60, -35.68287397857552],
            [-61, -37.10143324382325],
            [-62, -38.46070035273744],
            [-63, -39.76241747668338],
            [-64, -41.00845219579078],
            [-65, -42.200757808924365],
            [-66, -43.34133949298931],
            [-67, -44.43222588888687],
            [-68, -45.47544561279907],
            [-69, -46.473008156711984],
            [-70, -47.4268886394627],
            [-71, -48.33901588928281],
            [-72, -49.211263372918395],
            [-73, -50.045442528848746],
            [-74, -50.84329810839285],
            [-75, -51.60650517537998],
            [-76, -52.33666746040257],
            [-77, -53.03531680810034],
            [-78, -53.703913494671966],
            [-79, -54.343847227530986],
            [-80, -54.95643866966347],
            [-81, -55.542941357951165],
            [-82, -56.104543907756955],
            [-83, -56.64237241575524],
            [-84, -57.15749298968394],
            [-85, -57.6509143477496],
            [-86, -58.123590442175164],
            [-87, -58.57642307115502],
            [-88, -59.01026445156365],
            [-89, -59.42591973140301],
            [-90, -59.82414942640036],
            [-91, -60.20567176957118],
            [-92, -60.57116496611467],
            [-93, -60.921269348852064],
            [-94, -61.256589431675124],
            [-95, -61.57769586024447],
            [-96, -61.885127260553965],
            [-97, -62.179391987029064],
            [-98, -62.46096977261478],
            [-99, -62.73031328388353],
            [-100, -62.98784958459534],
            [-101, -63.23398151140779],
            [-102, -63.469088965588526],
            [-103, -63.6935301246525],
            [-104, -63.90764257784808],
            [-105, -64.11174438936682],
            [-106, -64.30613509306171],
            [-107, -64.49109662234196],
            [-108, -64.66689417877139],
            [-109, -64.8337770427449],
            [-110, -64.99197932945337],
            [-111, -65.14172069317868],
            [-112, -65.28320698278974],
            [-113, -65.41663085113905],
            [-114, -65.54217232089124],
            [-115, -65.6599993091484],
            [-116, -65.77026811307734],
            [-117, -65.87312385858625],
            [-118, -65.96870091394892],
            [-119, -66.05712327012856],
            [-120, -66.13850488941455],
            [-121, -66.21295002385152],
            [-122, -66.28055350481222],
            [-123, -66.34140100494187],
            [-124, -66.39556927358521],
            [-125, -66.4431263466926],
            [-126, -66.48413173209363],
            [-127, -66.51863657092127],
            [-128, -66.54668377586775],
            [-129, -66.56830814685566],
            [-130, -66.58353646461104],
            [-131, -66.592387562533],
            [-132, -66.59487237716155],
            [-133, -66.59099397745625],
            [-134, -66.58074757300844],
            [-135, -66.56412050122186],
            [-136, -66.5410921934075],
            [-137, -66.51163411965018],
            [-138, -66.47570971221546],
            [-139, -66.43327426717408],
            [-140, -66.38427482383028],
            [-141, -66.32865002144553],
            [-142, -66.26632993265349],
            [-143, -66.19723587286289],
            [-144, -66.12128018484223],
            [-145, -66.03836599757514],
            [-146, -65.94838695836467],
            [-147, -65.85122693705054],
            [-148, -65.74675970108514],
            [-149, -65.63484856008867],
            [-150, -65.5153459783758],
            [-151, -65.38809315381035],
            [-152, -65.25291956120432],
            [-153, -65.10964245833127],
            [-154, -64.95806635247196],
            [-155, -64.79798242525327],
            [-156, -64.62916791337855],
            [-157, -64.45138544268235],
            [-158, -64.2643823127718],
            [-159, -64.06788972934675],
            [-160, -63.86162198111963],
            [-161, -63.645275558088095],
            [-162, -63.41852820775168],
            [-163, -63.18103792571301],
            [-164, -62.93244187696791],
            [-165, -62.672355244077124],
            [-166, -62.400369998330156],
            [-167, -62.116053589972736],
            [-168, -61.81894755358456],
            [-169, -61.50856602478029],
            [-170, -61.18439416458454],
            [-171, -60.845886488123035],
            [-172, -60.492465094710056],
            [-173, -60.1235177970287],
            [-174, -59.73839614794225],
            [-175, -59.33641336459148],
            [-176, -58.916842150889806],
            [-177, -58.47891242139856],
            [-178, -58.0218089319404],
            [-179, -57.54466882529644],
            [-180, -57.04657910405785],
            [-180, -90],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2024-06-23T20:50:00.000Z", elevation: 0 },
    type: "Feature",
  });
  expect(
    night("2024-06-24T05:50:00+09:00", {
      elevation: "astronomical",
    })
  ).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, -90],
            [-180, -82.08089167647852],
            [-179, -82.21964723795347],
            [-178, -82.35167441372829],
            [-177, -82.47735580614254],
            [-176, -82.59704471234109],
            [-175, -82.71106771893535],
            [-174, -82.81972703296275],
            [-173, -82.92330257845448],
            [-172, -83.02205388444223],
            [-171, -83.11622178718598],
            [-170, -83.206029966717],
            [-169, -83.29168633544758],
            [-168, -83.37338429452647],
            [-167, -83.4513038718145],
            [-166, -83.5256127537603],
            [-165, -83.5964672220601],
            [-164, -83.66401300475559],
            [-163, -83.72838605034454],
            [-162, -83.7897132325231],
            [-161, -83.84811299234339],
            [-160, -83.90369592382582],
            [-159, -83.9565653084118],
            [-158, -84.00681760306499],
            [-157, -84.05454288631528],
            [-156, -84.09982526608525],
            [-155, -84.14274325273584],
            [-154, -84.18337010041077],
            [-153, -84.22177411943684],
            [-152, -84.25801896225516],
            [-151, -84.29216388510517],
            [-150, -84.32426398745352],
            [-149, -84.35437043095764],
            [-148, -84.38253063957394],
            [-147, -84.40878848225114],
            [-146, -84.43318443950729],
            [-145, -84.45575575505164],
            [-144, -84.4765365734937],
            [-143, -84.49555806507182],
            [-142, -84.51284853823397],
            [-141, -84.52843354081249],
            [-140, -84.54233595045179],
            [-139, -84.55457605487001],
            [-138, -84.56517162246625],
            [-137, -84.57413796371878],
            [-136, -84.58148798375693],
            [-135, -84.58723222643452],
            [-134, -84.59137891017541],
            [-133, -84.5939339558104],
            [-132, -84.59490100657717],
            [-131, -84.59428144040301],
            [-130, -84.59207437454548],
            [-129, -84.58827666262013],
            [-128, -84.58288288399525],
            [-127, -84.57588532549151],
            [-126, -84.5672739552733],
            [-125, -84.55703638877455],
            [-124, -84.54515784644799],
            [-123, -84.53162110308075],
            [-122, -84.51640642835929],
            [-121, -84.49949151831493],
            [-120, -84.48085141721751],
            [-119, -84.46045842942152],
            [-118, -84.43828202059817],
            [-117, -84.41428870771237],
            [-116, -84.38844193702278],
            [-115, -84.36070194929115],
            [-114, -84.33102563129232],
            [-113, -84.29936635260745],
            [-112, -84.26567378656537],
            [-111, -84.22989371406659],
            [-110, -84.19196780888001],
            [-109, -84.15183340284196],
            [-108, -84.10942322920906],
            [-107, -84.06466514221843],
            [-106, -84.01748181068555],
            [-105, -83.96779038322403],
            [-104, -83.91550212239405],
            [-103, -83.86052200477252],
            [-102, -83.80274828359173],
            [-101, -83.7420720101993],
            [-100, -83.67837651014744],
            [-99, -83.6115368092233],
            [-98, -83.54141900416693],
            [-97, -83.46787957218613],
            [-96, -83.39076461265806],
            [-95, -83.30990901358788],
            [-94, -83.2251355344725],
            [-93, -83.13625379616045],
            [-92, -83.04305916711014],
            [-91, -82.94533153408459],
            [-90, -82.84283394377907],
            [-89, -82.73531110011426],
            [-88, -82.62248769992343],
            [-87, -82.50406658747784],
            [-86, -82.3797267056872],
            [-85, -82.24912081884794],
            [-84, -82.11187297842689],
            [-83, -81.9675756995269],
            [-82, -81.81578681130111],
            [-81, -81.65602593962447],
            [-80, -81.48777057471122],
            [-79, -81.31045167002868],
            [-78, -81.12344871173782],
            [-77, -80.92608418993646],
            [-76, -80.7176173941692],
            [-75, -80.49723744599842],
            [-74, -80.26405547097576],
            [-73, -80.01709580126546],
            [-72, -79.75528608873907],
            [-71, -79.47744619708276],
            [-70, -79.18227573110156],
            [-69, -78.86834005317468],
            [-68, -78.53405463247516],
            [-67, -78.17766757471392],
            [-66, -77.7972401925018],
            [-65, -77.39062550417484],
            [-64, -76.95544459933117],
            [-63, -76.48906089227859],
            [-62, -75.98855241328923],
            [-61, -75.45068247929339],
            [-60, -74.87186936231765],
            [-59, -74.24815596229439],
            [-58, -73.57518102147817],
            [-57, -72.8481541225059],
            [-56, -72.06183761844765],
            [-55, -71.2105397629339],
            [-54, -70.28812462032307],
            [-53, -69.28804575882788],
            [-52, -68.20341208757536],
            [-51, -67.02709518175682],
            [-50, -65.75188757438073],
            [-49, -64.37072014513922],
            [-48, -62.87694318988269],
            [-47, -61.26466939786336],
            [-46, -59.52916761427018],
            [-45, -57.66728456680419],
            [-44, -55.67785948710822],
            [-43, -53.562086714454054],
            [-42, -51.32377745901451],
            [-41, -48.969476843840305],
            [-40, -46.508407024940404],
            [-39, -43.952229527839805],
            [-38, -41.31464512966043],
            [-37, -38.61087165785671],
            [-36, -35.857053940793186],
            [-35, -33.06966348181906],
            [-34, -30.264939026913883],
            [-33, -27.458406165047535],
            [-32, -24.664498397672304],
            [-31, -21.89628720213442],
            [-30, -19.16531671678584],
            [-29, -16.481530675604816],
            [-28, -13.853274970697576],
            [-27, -11.287357993515068],
            [-26, -8.789151777604273],
            [-25, -6.362719074127358],
            [-24, -4.010954153439087],
            [-23, -1.7357278672260643],
            [-22, 0.4619699633576538],
            [-21, 2.581895594923946],
            [-20, 4.62442684021231],
            [-19, 6.590450604918581],
            [-18, 8.481263096062468],
            [-17, 10.298482598027277],
            [-16, 12.043974233784361],
            [-15, 13.719785833900893],
            [-14, 15.32809387754801],
            [-13, 16.871158409104385],
            [-12, 18.351285840428712],
            [-11, 19.770798598968987],
            [-10, 21.13201065816581],
            [-9, 22.43720807652803],
            [-8, 23.688633766577283],
            [-7, 24.88847580871782],
            [-6, 26.03885871428842],
            [-5, 27.14183712444104],
            [-4, 28.199391505991507],
            [-3, 29.213425471680555],
            [-2, 30.18576441051572],
            [-1, 31.118155164493313],
            [0, 32.012266531637145],
            [1, 32.86969041263942],
            [2, 33.69194345015257],
            [3, 34.48046903665455],
            [4, 35.23663958943847],
            [5, 35.961759010247555],
            [6, 36.65706526292162],
            [7, 37.32373301560291],
            [8, 37.96287630497781],
            [9, 38.575551189060114],
            [10, 39.16275836245205],
            [11, 39.72544571411295],
            [12, 40.2645108126426],
            [13, 40.780803308130984],
            [14, 41.27512724290003],
            [15, 41.74824326609419],
            [16, 42.200870749180226],
            [17, 42.63368980108147],
            [18, 43.047343182980285],
            [19, 43.44243812383277],
            [20, 43.81954803841343],
            [21, 44.17921415028173],
            [22, 44.52194702247861],
            [23, 44.848227999049385],
            [24, 45.1585105606719],
            [25, 45.45322159777074],
            [26, 45.73276260453314],
            [27, 45.99751079722574],
            [28, 46.24782016015355],
            [29, 46.48402242251556],
            [30, 46.70642796929817],
            [31, 46.9153266892197],
            [32, 47.11098876259634],
            [33, 47.29366539184995],
            [34, 47.46358947722207],
            [35, 47.62097624009869],
            [36, 47.76602379619076],
            [37, 47.898913680653926],
            [38, 48.01981132707301],
            [39, 48.12886650207853],
            [40, 48.22621369720876],
            [41, 48.31197247947817],
            [42, 48.38624780196463],
            [43, 48.4491302755816],
            [44, 48.50069640305808],
            [45, 48.541008776009164],
            [46, 48.57011623584144],
            [47, 48.58805399910205],
            [48, 48.59484374774591],
            [49, 48.590493684663045],
            [50, 48.574998554676625],
            [51, 48.54833963109123],
            [52, 48.51048466774029],
            [53, 48.46138781635106],
            [54, 48.40098950891391],
            [55, 48.32921630461063],
            [56, 48.24598070072237],
            [57, 48.151180906802935],
            [58, 48.044700581265154],
            [59, 47.926408529388205],
            [60, 47.79615836161159],
            [61, 47.653788110835556],
            [62, 47.49911980729966],
            [63, 47.33195900946011],
            [64, 47.152094289131874],
            [65, 46.95929666900565],
            [66, 46.75331901049015],
            [67, 46.533895349670665],
            [68, 46.300740179014085],
            [69, 46.05354767229074],
            [70, 45.79199085002667],
            [71, 45.515720682647824],
            [72, 45.224365128333694],
            [73, 44.917528102465496],
            [74, 44.59478837543798],
            [75, 44.25569839550961],
            [76, 43.89978303330211],
            [77, 43.526538244532496],
            [78, 43.13542964758536],
            [79, 42.72589101261634],
            [80, 42.29732265904329],
            [81, 41.84908975854382],
            [82, 41.38052054106271],
            [83, 40.89090440187204],
            [84, 40.37948990844996],
            [85, 39.84548270690105],
            [86, 39.28804332887775],
            [87, 38.70628490154367],
            [88, 38.09927076511923],
            [89, 37.46601200505784],
            [90, 36.80546490902166],
            [91, 36.11652836269181],
            [92, 35.398041203203924],
            [93, 34.64877955483228],
            [94, 33.86745417866305],
            [95, 33.05270787665127],
            [96, 32.20311300094097],
            [97, 31.31716913198359],
            [98, 30.39330100421281],
            [99, 29.429856776277866],
            [100, 28.425106764615762],
            [101, 27.377242785033292],
            [102, 26.284378277606205],
            [103, 25.14454942626426],
            [104, 23.955717526635954],
            [105, 22.715772904761565],
            [106, 21.422540745809894],
            [107, 20.073789256432033],
            [108, 18.667240657097704],
            [109, 17.20058558148291],
            [110, 15.671501547823958],
            [111, 14.077676260249321],
            [112, 12.416836593122962],
            [113, 10.686784203059885],
            [114, 8.88543879347689],
            [115, 7.010890113674012],
            [116, 5.061459792250401],
            [117, 3.0357740610882016],
            [118, 0.9328482921856985],
            [119, -1.247815991646912],
            [120, -3.506121405166465],
            [121, -5.841252720875978],
            [122, -8.25154399780279],
            [123, -10.73433748215851],
            [124, -13.285838619393754],
            [125, -15.90097360276895],
            [126, -18.57325834471971],
            [127, -21.29469047155262],
            [128, -24.055678654981623],
            [129, -26.84502587476731],
            [130, -29.649984418100917],
            [131, -32.45639973334074],
            [132, -35.2489567422284],
            [133, -38.01153507575747],
            [134, -40.727668622119246],
            [135, -43.38109038233386],
            [136, -45.95632783994863],
            [137, -48.43930009640245],
            [138, -50.81785985088727],
            [139, -53.082224339644036],
            [140, -55.225250997322185],
            [141, -57.24253421066512],
            [142, -59.13232454922629],
            [143, -60.89529530505335],
            [144, -62.53419781669186],
            [145, -64.05345414639127],
            [146, -65.45873350750155],
            [147, -66.75654999258487],
            [148, -67.95390714529466],
            [149, -69.05800290267314],
            [150, -70.07599847892705],
            [151, -71.01484774325624],
            [152, -71.88117952527799],
            [153, -72.68122351345595],
            [154, -73.42077028059259],
            [155, -74.10515681424552],
            [156, -74.73927023776888],
            [157, -75.32756383553287],
            [158, -75.87408084170673],
            [159, -76.38248261723248],
            [160, -76.85607879246479],
            [161, -77.29785769987224],
            [162, -77.71051598726345],
            [163, -78.09648671875568],
            [164, -78.45796556938949],
            [165, -78.79693492757931],
            [166, -79.11518586046584],
            [167, -79.41433798894076],
            [168, -79.69585737569727],
            [169, -79.96107256166957],
            [170, -80.21118890142861],
            [171, -80.44730135211077],
            [172, -80.67040586728886],
            [173, -80.88140953963202],
            [174, -81.08113962619723],
            [175, -81.27035157903667],
            [176, -81.44973619235617],
            [177, -81.6199259662686],
            [178, -81.78150077657236],
            [179, -81.93499293013741],
            [180, -82.08089167647847],
            [180, -90],
            [-180, -90],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2024-06-23T20:50:00.000Z", elevation: -18 },
    type: "Feature",
  });
  expect(night("2024-12-21T18:19:00+09:00")).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, 90],
            [180, 90],
            [180, -60.56255206958286],
            [179, -60.19799803149129],
            [178, -59.817460013152996],
            [177, -59.42026320411442],
            [176, -59.00569300585876],
            [175, -58.57299279393947],
            [174, -58.121361586154386],
            [173, -57.64995162427994],
            [172, -57.15786588038809],
            [171, -56.6441555031105],
            [170, -56.107817224560485],
            [169, -55.54779075516892],
            [168, -54.96295620164988],
            [167, -54.35213155294385],
            [166, -53.714070290567996],
            [165, -53.047459193644016],
            [164, -52.35091642531795],
            [163, -51.62299000666931],
            [162, -50.86215680689223],
            [161, -50.06682220483261],
            [160, -49.235320607145525],
            [159, -48.365917042545654],
            [158, -47.45681008981525],
            [157, -46.50613643907577],
            [156, -45.51197743059015],
            [155, -44.4723679617014],
            [154, -43.38530819834496],
            [153, -42.24877856977142],
            [152, -41.06075855928928],
            [151, -39.81924982406707],
            [150, -38.522304175595686],
            [149, -37.168056919713656],
            [148, -35.75476597964801],
            [147, -34.28085709432636],
            [146, -32.74497518358023],
            [145, -31.14604168875433],
            [144, -29.483317321575964],
            [143, -27.756469181710706],
            [142, -25.965640639759435],
            [141, -24.111521747067883],
            [140, -22.19541726413921],
            [139, -20.21930875407834],
            [138, -18.185906645661486],
            [137, -16.098687828444127],
            [136, -13.961914303069737],
            [135, -11.78062876837477],
            [134, -9.560623848922624],
            [133, -7.308382967427919],
            [132, -5.0309925922514225],
            [131, -2.7360276093808795],
            [130, -0.43141367885981413],
            [129, 1.874727611268177],
            [128, 4.174243440545495],
            [127, 6.459116037594413],
            [126, 8.721622135355313],
            [125, 10.954477823519266],
            [124, 13.150962347810626],
            [123, 15.30501623316944],
            [122, 17.41131119002258],
            [121, 19.465291343100272],
            [120, 21.463187177257247],
            [119, 23.402005064926616],
            [118, 25.279496242555783],
            [117, 27.094109629743464],
            [116, 28.84493298427062],
            [115, 30.531626645303835],
            [114, 32.15435363798978],
            [113, 33.71370929568466],
            [112, 35.21065288754947],
            [111, 36.64644308559573],
            [110, 38.02257851160065],
            [109, 39.34074409645508],
            [108, 40.602763572710714],
            [107, 41.81055810431121],
            [106, 42.966110827434456],
            [105, 44.07143692080739],
            [104, 45.12855872913882],
            [103, 46.13948541606112],
            [102, 47.10619661107155],
            [101, 48.03062952809079],
            [100, 48.914669063000176],
            [99, 49.760140417305415],
            [98, 50.56880383997734],
            [97, 51.3423511259621],
            [96, 52.08240355539715],
            [95, 52.79051100061749],
            [94, 53.46815196765004],
            [93, 54.116734374611276],
            [92, 54.737596901100524],
            [91, 55.33201077040862],
            [90, 55.90118185036361],
            [89, 56.44625297921266],
            [88, 56.968306440442326],
            [87, 57.46836652521255],
            [86, 57.94740213346951],
            [85, 58.406329375128394],
            [84, 58.84601414127161],
            [83, 59.26727462235501],
            [82, 59.67088375618534],
            [81, 60.05757159312872],
            [80, 60.42802756980973],
            [79, 60.782902685609365],
            [78, 61.12281157870055],
            [77, 61.4483345002764],
            [76, 61.760019187121586],
            [75, 62.0583826338276],
            [74, 62.34391276682182],
            [73, 62.61707002302101],
            [72, 62.87828883637663],
            [71, 63.12797903588835],
            [70, 63.36652715885335],
            [69, 63.59429768321705],
            [68, 63.81163418291599],
            [67, 64.01886041007232],
            [66, 64.21628130782419],
            [65, 64.40418395746973],
            [64, 64.58283846347163],
            [63, 64.75249877972117],
            [62, 64.91340348030296],
            [61, 65.06577647783541],
            [60, 65.20982769229349],
            [59, 65.34575367305098],
            [58, 65.47373817671155],
            [57, 65.5939527031319],
            [56, 65.7065569918799],
            [55, 65.81169948121345],
            [54, 65.90951773151448],
            [53, 66.00013881496686],
            [52, 66.08367967312621],
            [51, 66.1602474438955],
            [50, 66.22993975929064],
            [49, 66.29284501525663],
            [48, 66.34904261467564],
            [47, 66.39860318459431],
            [46, 66.44158876858816],
            [45, 66.4780529950741],
            [44, 66.50804122228091],
            [43, 66.53159066048798],
            [42, 66.54873047204626],
            [41, 66.55948184960215],
            [40, 66.56385807285248],
            [39, 66.56186454406894],
            [38, 66.553498802541],
            [37, 66.53875051799784],
            [36, 66.51760146298176],
            [35, 66.49002546405715],
            [34, 66.45598833165025],
            [33, 66.41544776822514],
            [32, 66.36835325441038],
            [31, 66.31464591259703],
            [30, 66.25425834743447],
            [29, 66.18711446255166],
            [28, 66.11312925273093],
            [27, 66.03220857065696],
            [26, 65.94424886725517],
            [25, 65.84913690452105],
            [24, 65.74674943962542],
            [23, 65.63695287895784],
            [22, 65.51960290064386],
            [21, 65.39454404393837],
            [20, 65.26160926376036],
            [19, 65.12061944848905],
            [18, 64.9713828989932],
            [17, 64.81369476671026],
            [16, 64.6473364484323],
            [15, 64.47207493529181],
            [14, 64.28766211327374],
            [13, 64.0938340124099],
            [12, 63.890310001644124],
            [11, 63.676791926188024],
            [10, 63.452963184026714],
            [9, 63.218487738081045],
            [8, 62.9730090603954],
            [7, 62.71614900460317],
            [6, 62.44750660283414],
            [5, 62.16665678317913],
            [4, 61.873149003828956],
            [3, 61.56650580007396],
            [2, 61.2462212405038],
            [1, 60.91175928900896],
            [0, 60.56255206958286],
            [-1, 60.19799803149128],
            [-2, 59.817460013152996],
            [-3, 59.42026320411443],
            [-4, 59.00569300585873],
            [-5, 58.57299279393947],
            [-6, 58.12136158615441],
            [-7, 57.64995162427994],
            [-8, 57.15786588038809],
            [-9, 56.644155503110476],
            [-10, 56.10781722456049],
            [-11, 55.54779075516895],
            [-12, 54.96295620164988],
            [-13, 54.35213155294387],
            [-14, 53.714070290567975],
            [-15, 53.047459193644016],
            [-16, 52.35091642531798],
            [-17, 51.62299000666927],
            [-18, 50.862156806892244],
            [-19, 50.06682220483266],
            [-20, 49.235320607145525],
            [-21, 48.3659170425457],
            [-22, 47.456810089815214],
            [-23, 46.50613643907577],
            [-24, 45.5119774305902],
            [-25, 44.47236796170141],
            [-26, 43.38530819834496],
            [-27, 42.24877856977137],
            [-28, 41.06075855928929],
            [-29, 39.81924982406714],
            [-30, 38.52230417559569],
            [-31, 37.16805691971367],
            [-32, 35.754765979647956],
            [-33, 34.28085709432637],
            [-34, 32.74497518358032],
            [-35, 31.146041688754263],
            [-36, 29.48331732157597],
            [-37, 27.756469181710628],
            [-38, 25.965640639759442],
            [-39, 24.111521747067997],
            [-40, 22.19541726413912],
            [-41, 20.21930875407835],
            [-42, 18.185906645661603],
            [-43, 16.09868782844414],
            [-44, 13.961914303069753],
            [-45, 11.780628768374786],
            [-46, 9.560623848922639],
            [-47, 7.3083829674280505],
            [-48, 5.030992592251439],
            [-49, 2.736027609380896],
            [-50, 0.4314136788598303],
            [-51, -1.8747276112681606],
            [-52, -4.174243440545363],
            [-53, -6.459116037594512],
            [-54, -8.721622135355295],
            [-55, -10.954477823519138],
            [-56, -13.15096234781061],
            [-57, -15.305016233169317],
            [-58, -17.411311190022563],
            [-59, -19.46529134310026],
            [-60, -21.46318717725713],
            [-61, -23.402005064926605],
            [-62, -25.279496242555773],
            [-63, -27.09410962974345],
            [-64, -28.844932984270606],
            [-65, -30.531626645303746],
            [-66, -32.15435363798978],
            [-67, -33.71370929568466],
            [-68, -35.21065288754946],
            [-69, -36.64644308559572],
            [-70, -38.02257851160057],
            [-71, -39.340744096455076],
            [-72, -40.60276357271071],
            [-73, -41.81055810431121],
            [-74, -42.96611082743445],
            [-75, -44.071436920807386],
            [-76, -45.12855872913881],
            [-77, -46.13948541606112],
            [-78, -47.106196611071496],
            [-79, -48.030629528090785],
            [-80, -48.91466906300017],
            [-81, -49.76014041730541],
            [-82, -50.56880383997734],
            [-83, -51.34235112596205],
            [-84, -52.082403555397136],
            [-85, -52.79051100061748],
            [-86, -53.46815196765004],
            [-87, -54.116734374611276],
            [-88, -54.73759690110049],
            [-89, -55.33201077040862],
            [-90, -55.90118185036361],
            [-91, -56.44625297921266],
            [-92, -56.96830644044232],
            [-93, -57.468366525212524],
            [-94, -57.94740213346951],
            [-95, -58.406329375128394],
            [-96, -58.84601414127161],
            [-97, -59.26727462235501],
            [-98, -59.67088375618534],
            [-99, -60.05757159312872],
            [-100, -60.42802756980973],
            [-101, -60.78290268560935],
            [-102, -61.12281157870052],
            [-103, -61.4483345002764],
            [-104, -61.760019187121586],
            [-105, -62.0583826338276],
            [-106, -62.34391276682181],
            [-107, -62.61707002302101],
            [-108, -62.87828883637663],
            [-109, -63.12797903588835],
            [-110, -63.36652715885335],
            [-111, -63.59429768321705],
            [-112, -63.81163418291599],
            [-113, -64.01886041007232],
            [-114, -64.21628130782419],
            [-115, -64.40418395746973],
            [-116, -64.58283846347163],
            [-117, -64.75249877972115],
            [-118, -64.91340348030295],
            [-119, -65.0657764778354],
            [-120, -65.20982769229346],
            [-121, -65.34575367305098],
            [-122, -65.47373817671155],
            [-123, -65.5939527031319],
            [-124, -65.7065569918799],
            [-125, -65.81169948121344],
            [-126, -65.90951773151448],
            [-127, -66.00013881496686],
            [-128, -66.08367967312621],
            [-129, -66.1602474438955],
            [-130, -66.22993975929064],
            [-131, -66.29284501525663],
            [-132, -66.34904261467564],
            [-133, -66.39860318459431],
            [-134, -66.44158876858816],
            [-135, -66.4780529950741],
            [-136, -66.50804122228091],
            [-137, -66.53159066048796],
            [-138, -66.54873047204626],
            [-139, -66.55948184960215],
            [-140, -66.56385807285248],
            [-141, -66.56186454406894],
            [-142, -66.553498802541],
            [-143, -66.53875051799784],
            [-144, -66.51760146298176],
            [-145, -66.49002546405715],
            [-146, -66.45598833165025],
            [-147, -66.41544776822514],
            [-148, -66.36835325441038],
            [-149, -66.31464591259703],
            [-150, -66.25425834743447],
            [-151, -66.18711446255166],
            [-152, -66.11312925273093],
            [-153, -66.03220857065696],
            [-154, -65.94424886725517],
            [-155, -65.84913690452105],
            [-156, -65.74674943962542],
            [-157, -65.63695287895786],
            [-158, -65.51960290064386],
            [-159, -65.39454404393837],
            [-160, -65.26160926376038],
            [-161, -65.12061944848905],
            [-162, -64.9713828989932],
            [-163, -64.81369476671026],
            [-164, -64.6473364484323],
            [-165, -64.47207493529183],
            [-166, -64.28766211327374],
            [-167, -64.0938340124099],
            [-168, -63.890310001644124],
            [-169, -63.676791926188024],
            [-170, -63.452963184026714],
            [-171, -63.218487738081045],
            [-172, -62.9730090603954],
            [-173, -62.71614900460317],
            [-174, -62.447506602834146],
            [-175, -62.16665678317915],
            [-176, -61.873149003828956],
            [-177, -61.566505800073976],
            [-178, -61.2462212405038],
            [-179, -60.91175928900896],
            [-180, -60.562552069582864],
            [-180, 90],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2024-12-21T09:19:00.000Z", elevation: 0 },
    type: "Feature",
  });
  expect(
    night("2024-12-21T18:19:00+09:00", { elevation: "astronomical" })
  ).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, 90],
            [180, 90],
            [180, -38.11387677351],
            [179, -37.482645548194924],
            [178, -36.824220394662504],
            [177, -36.137506551397564],
            [176, -35.421349617394604],
            [175, -34.67453291085037],
            [174, -33.89577484154582],
            [173, -33.08372633680143],
            [172, -32.23696837122663],
            [171, -31.35400966295836],
            [170, -30.43328461407885],
            [169, -29.47315159087677],
            [168, -28.471891661058333],
            [167, -27.427707930505115],
            [166, -26.338725652329853],
            [165, -25.202993316464838],
            [164, -24.018484969542385],
            [163, -22.783104063059533],
            [162, -21.494689183415193],
            [161, -20.151022080840004],
            [160, -18.74983848574525],
            [159, -17.28884228040967],
            [158, -15.765723680344143],
            [157, -14.178182171289638],
            [156, -12.523955041405792],
            [155, -10.80085243858707],
            [154, -9.006799962205733],
            [153, -7.139889855580402],
            [152, -5.19844188426308],
            [151, -3.181074944375651],
            [150, -1.0867903164235628],
            [149, 1.0849327726897338],
            [148, 3.334029037560758],
            [147, 5.659726871049665],
            [146, 8.060417246794037],
            [145, 10.53351435638318],
            [144, 13.075312183009656],
            [143, 15.680843247542727],
            [142, 18.343748167468025],
            [141, 21.0561673280145],
            [140, 23.808668635182983],
            [139, 26.590227589087036],
            [138, 29.38827716991122],
            [137, 32.18884446556701],
            [136, 34.976787687991],
            [135, 37.73614043169698],
            [134, 40.4505593851301],
            [133, 43.10385775828802],
            [132, 45.68059123111182],
            [131, 48.166649334120265],
            [130, 50.54979667303139],
            [129, 52.82010871569418],
            [128, 54.970257514647884],
            [127, 56.99562236079811],
            [126, 58.894224700823365],
            [125, 60.666509928334065],
            [124, 62.31501565119213],
            [123, 63.843973831555026],
            [122, 65.25889282311803],
            [121, 66.56615715807109],
            [120, 67.77267135388374],
            [119, 68.88556215490108],
            [118, 69.91194362544913],
            [117, 70.85874233249454],
            [116, 71.73257553665202],
            [115, 72.53967335400884],
            [114, 73.28583556962141],
            [113, 73.9764145215046],
            [112, 74.61631671576289],
            [111, 75.21001722607397],
            [110, 75.76158226246025],
            [109, 76.27469645856999],
            [108, 76.75269238580367],
            [107, 77.19858055905239],
            [106, 77.61507877518949],
            [105, 78.00464005197375],
            [104, 78.36947874228174],
            [103, 78.71159461405824],
            [102, 79.03279483306565],
            [101, 79.33471388181967],
            [100, 79.61883150824828],
            [99, 79.8864888323485],
            [98, 80.13890275637284],
            [97, 80.37717882962265],
            [96, 80.60232271688493],
            [95, 80.81525041281505],
            [94, 81.01679733515631],
            [93, 81.20772641895239],
            [92, 81.38873532275791],
            [91, 81.56046284686232],
            [90, 81.72349465306536],
            [89, 81.87836836578148],
            [88, 82.02557812529916],
            [87, 82.16557865590728],
            [86, 82.29878890431348],
            [85, 82.42559529727285],
            [84, 82.54635466156348],
            [83, 82.66139684433708],
            [82, 82.77102706735386],
            [81, 82.87552804463823],
            [80, 82.97516188959825],
            [79, 83.0701718345755],
            [78, 83.16078378309902],
            [77, 83.24720771274792],
            [76, 83.3296389444476],
            [75, 83.40825929219847],
            [74, 83.4832381056391],
            [73, 83.55473321642572],
            [72, 83.62289179818062],
            [71, 83.68785114866631],
            [70, 83.74973940188129],
            [69, 83.80867617692883],
            [68, 83.86477316975841],
            [67, 83.91813469322396],
            [66, 83.96885817031153],
            [65, 84.01703458487945],
            [64, 84.06274889378824],
            [63, 84.10608040389539],
            [62, 84.14710311702346],
            [61, 84.18588604569146],
            [60, 84.22249350210947],
            [59, 84.25698536268187],
            [58, 84.28941731003304],
            [57, 84.31984105436618],
            [56, 84.34830453577942],
            [55, 84.37485210900086],
            [54, 84.39952471185],
            [53, 84.42236001860418],
            [52, 84.44339257932178],
            [51, 84.46265394606654],
            [50, 84.48017278687576],
            [49, 84.49597498822196],
            [48, 84.51008374663657],
            [47, 84.52251965008342],
            [46, 84.53330074960148],
            [45, 84.54244262166657],
            [44, 84.54995842166403],
            [43, 84.55585892880202],
            [42, 84.56015258274333],
            [41, 84.5628455121796],
            [40, 84.56394155552233],
            [39, 84.56344227383637],
            [38, 84.56134695609433],
            [37, 84.55765261678366],
            [36, 84.55235398585224],
            [35, 84.54544349093092],
            [34, 84.53691123172538],
            [33, 84.52674494642241],
            [32, 84.51492996990277],
            [31, 84.50144918350658],
            [30, 84.48628295603814],
            [29, 84.46940907564455],
            [28, 84.4508026721383],
            [27, 84.43043612927359],
            [26, 84.40827898641045],
            [25, 84.3842978289352],
            [24, 84.3584561667129],
            [23, 84.33071429976864],
            [22, 84.30102917029139],
            [21, 84.26935419994801],
            [20, 84.23563911138251],
            [19, 84.19982973263747],
            [18, 84.16186778309917],
            [17, 84.12169063940281],
            [16, 84.07923107956194],
            [15, 84.0344170033834],
            [14, 83.98717112701533],
            [13, 83.93741064922415],
            [12, 83.88504688672542],
            [11, 83.8299848755814],
            [10, 83.77212293533391],
            [9, 83.71135219215009],
            [8, 83.64755605682012],
            [7, 83.58060965295033],
            [6, 83.51037919013967],
            [5, 83.43672127629205],
            [4, 83.35948216250678],
            [3, 83.27849691318038],
            [2, 83.1935884930334],
            [1, 83.10456676174039],
            [0, 83.0112273656557],
            [-1, 82.91335051478762],
            [-2, 82.81069963164353],
            [-3, 82.70301985683129],
            [-4, 82.59003639432296],
            [-5, 82.47145267702855],
            [-6, 82.3469483307629],
            [-7, 82.21617691175844],
            [-8, 82.07876338954955],
            [-9, 81.93430134326262],
            [-10, 81.7823498350421],
            [-11, 81.62242991946107],
            [-12, 81.45402074224143],
            [-13, 81.27655517538261],
            [-14, 81.08941492880612],
            [-15, 80.8919250708231],
            [-16, 80.68334788109352],
            [-17, 80.46287595027906],
            [-18, 80.2296244303693],
            [-19, 79.9826223288252],
            [-20, 79.72080272854579],
            [-21, 79.44299180468161],
            [-22, 79.14789649928633],
            [-23, 78.83409070686194],
            [-24, 78.4999998197745],
            [-25, 78.14388348481573],
            [-26, 77.76381643448418],
            [-27, 77.3576672839624],
            [-28, 76.92307523431549],
            [-29, 76.45742470375856],
            [-30, 75.9578180347678],
            [-31, 75.42104661211707],
            [-32, 74.84356099685675],
            [-33, 74.22144105970241],
            [-34, 73.55036761395455],
            [-35, 72.82559773389178],
            [-36, 72.04194682616159],
            [-37, 71.19378161096411],
            [-38, 70.27502944698689],
            [-39, 69.27921082215032],
            [-40, 68.19950316346133],
            [-41, 67.02884509724373],
            [-42, 65.76009046123427],
            [-43, 64.38622012245526],
            [-44, 62.90061629413048],
            [-45, 61.297397968446546],
            [-46, 59.57180708297536],
            [-47, 57.72062369314396],
            [-48, 55.74257641561467],
            [-49, 53.63870455288203],
            [-50, 51.412624030751026],
            [-51, 49.07065349315785],
            [-52, 46.621770633557034],
            [-53, 44.07739028560917],
            [-54, 41.45098043011276],
            [-55, 38.75755428129568],
            [-56, 36.013090955570895],
            [-57, 33.233941365216296],
            [-58, 30.43627044307288],
            [-59, 27.635574471870555],
            [-60, 24.84629699936942],
            [-61, 22.081552025047866],
            [-62, 19.35295114033759],
            [-63, 16.670523073007633],
            [-64, 14.04270956811079],
            [-65, 11.476420063401301],
            [-66, 8.977128293641854],
            [-67, 6.5489959301352885],
            [-68, 4.19501094066398],
            [-69, 1.9171310548825007],
            [-70, -0.28357476074090116],
            [-71, -2.40679173434015],
            [-72, -4.452834759617762],
            [-73, -6.422535649570037],
            [-74, -8.317142879679434],
            [-75, -10.138233789641058],
            [-76, -11.887638715995887],
            [-77, -13.567376218064013],
            [-78, -15.179598389077364],
            [-79, -16.726545174361913],
            [-80, -18.210506617752085],
            [-81, -19.63379200226232],
            [-82, -20.998704923581847],
            [-83, -22.307523422301422],
            [-84, -23.56248439390934],
            [-85, -24.765771588419923],
            [-86, -25.91950660014378],
            [-87, -27.0257423302702],
            [-88, -28.086458479443078],
            [-89, -29.103558693954916],
            [-90, -30.07886904766189],
            [-91, -31.014137592643824],
            [-92, -31.911034755585472],
            [-93, -32.77115439451783],
            [-94, -33.596015362625494],
            [-95, -34.38706345298395],
            [-96, -35.14567362097974],
            [-97, -35.873152400372895],
            [-98, -36.570740445016824],
            [-99, -37.23961514161917],
            [-100, -37.880893250021174],
            [-101, -38.495633536643254],
            [-102, -39.08483937430207],
            [-103, -39.649461287804776],
            [-104, -40.190399429795654],
            [-105, -40.708505975456724],
            [-106, -41.20458742800449],
            [-107, -41.67940682961628],
            [-108, -42.13368587457258],
            [-109, -42.56810692311039],
            [-110, -42.98331491582538],
            [-111, -43.37991918950532],
            [-112, -43.75849519607348],
            [-113, -44.1195861269206],
            [-114, -44.46370444533676],
            [-115, -44.791333330060056],
            [-116, -45.102928033155],
            [-117, -45.398917155546904],
            [-118, -45.67970384358243],
            [-119, -45.94566690997938],
            [-120, -46.19716188247748],
            [-121, -46.43452198342009],
            [-122, -46.65805904339004],
            [-123, -46.868064351897694],
            [-124, -47.06480944798039],
            [-125, -47.24854685342603],
            [-126, -47.41951075117895],
            [-127, -47.57791761132951],
            [-128, -47.72396676693064],
            [-129, -47.85784094172439],
            [-130, -47.979706731705505],
            [-131, -48.08971504229134],
            [-132, -48.188001482714746],
            [-133, -48.27468671910519],
            [-134, -48.349876787574864],
            [-135, -48.413663368481615],
            [-136, -48.46612402289779],
            [-137, -48.5073223921739],
            [-138, -48.537308361349154],
            [-139, -48.55611818702468],
            [-140, -48.563774590182604],
            [-141, -48.560286814301485],
            [-142, -48.54565064898765],
            [-143, -48.51984841921196],
            [-144, -48.482848940111225],
            [-145, -48.43460743718341],
            [-146, -48.37506543157505],
            [-147, -48.30415059002783],
            [-148, -48.2217765389179],
            [-149, -48.12784264168746],
            [-150, -48.022233738830806],
            [-151, -47.90481984945881],
            [-152, -47.775455833323456],
            [-153, -47.633981012040394],
            [-154, -47.48021874809987],
            [-155, -47.31397598010692],
            [-156, -47.135042712537924],
            [-157, -46.94319145814696],
            [-158, -46.738176630996314],
            [-159, -46.51973388792871],
            [-160, -46.28757941613822],
            [-161, -46.04140916434059],
            [-162, -45.78089801488725],
            [-163, -45.50569889401769],
            [-164, -45.215441817302654],
            [-165, -44.909732867200255],
            [-166, -44.5881530995322],
            [-167, -44.25025737559568],
            [-168, -43.89557311656284],
            [-169, -43.52359897679467],
            [-170, -43.13380343271951],
            [-171, -42.725623284011924],
            [-172, -42.29846206397068],
            [-173, -41.85168835625598],
            [-174, -41.384634015528604],
            [-175, -40.89659229006631],
            [-176, -40.38681584515112],
            [-177, -39.85451468696753],
            [-178, -39.29885398797419],
            [-179, -38.718951816277546],
            [-180, -38.11387677351],
            [-180, 90],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2024-12-21T09:19:00.000Z", elevation: -18 },
    type: "Feature",
  });
  expect(night("2023-10-01T07:00:00Z", { elevation: "civil" })).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, 80.25145852957938],
            [-179, 80.77962018313582],
            [-178, 81.24995070432934],
            [-177, 81.67143387199863],
            [-176, 82.05125973829615],
            [-175, 82.3952557143765],
            [-174, 82.70819786850151],
            [-173, 82.99403986751126],
            [-172, 83.25608410187917],
            [-171, 83.49711146278857],
            [-170, 83.71948105431206],
            [-169, 83.92520771590894],
            [-168, 84.11602294457994],
            [-167, 84.29342324423165],
            [-166, 84.45870884476057],
            [-165, 84.61301496798464],
            [-164, 84.75733727005857],
            [-163, 84.8925526933417],
            [-162, 85.01943666986095],
            [-161, 85.13867740294468],
            [-160, 85.25088779218079],
            [-159, 85.35661544482909],
            [-158, 85.45635112374801],
            [-157, 85.55053591033138],
            [-156, 85.6395673054745],
            [-155, 85.72380444829294],
            [-154, 85.8035725982633],
            [-153, 85.8791669995271],
            [-152, 85.95085622464458],
            [-151, 86.01888507791999],
            [-150, 86.08347712457962],
            [-149, 86.14483690090101],
            [-148, 86.20315185127492],
            [-147, 86.25859403074098],
            [-146, 86.31132160542455],
            [-145, 86.36148017825735],
            [-144, 86.4092039631948],
            [-143, 86.45461682766381],
            [-142, 86.49783322008231],
            [-141, 86.53895899686225],
            [-140, 86.57809216126638],
            [-139, 86.61532352477043],
            [-138, 86.65073730012286],
            [-137, 86.68441163405791],
            [-136, 86.71641908656731],
            [-135, 86.74682706273502],
            [-134, 86.77569820236687],
            [-133, 86.80309073199078],
            [-132, 86.82905878322987],
            [-131, 86.85365268105815],
            [-130, 86.8769192050283],
            [-129, 86.89890182618437],
            [-128, 86.91964092205652],
            [-127, 86.93917397185275],
            [-126, 86.95753573371609],
            [-125, 86.97475840570266],
            [-124, 86.99087177194785],
            [-123, 87.00590333531925],
            [-122, 87.01987843771],
            [-121, 87.0328203689953],
            [-120, 87.04475046556075],
            [-119, 87.0556881992042],
            [-118, 87.06565125712588],
            [-117, 87.07465561363605],
            [-116, 87.08271559413458],
            [-115, 87.08984393185055],
            [-114, 87.09605181776737],
            [-113, 87.10134894410864],
            [-112, 87.1057435416949],
            [-111, 87.1092424114519],
            [-110, 87.11185095028968],
            [-109, 87.1135731715424],
            [-108, 87.11441172011008],
            [-107, 87.11436788241181],
            [-106, 87.11344159121813],
            [-105, 87.1116314253998],
            [-104, 87.10893460458706],
            [-103, 87.10534697870453],
            [-102, 87.10086301230902],
            [-101, 87.09547576361601],
            [-100, 87.0891768580695],
            [-99, 87.08195645626455],
            [-98, 87.07380321599265],
            [-97, 87.06470424813274],
            [-96, 87.05464506606484],
            [-95, 87.04360952823204],
            [-94, 87.03157977341476],
            [-93, 87.01853614822714],
            [-92, 87.00445712626998],
            [-91, 86.98931921830477],
            [-90, 86.97309687272833],
            [-89, 86.95576236553096],
            [-88, 86.93728567882181],
            [-87, 86.9176343668883],
            [-86, 86.89677340861817],
            [-85, 86.87466504497175],
            [-84, 86.85126860001938],
            [-83, 86.82654028386999],
            [-82, 86.80043297559658],
            [-81, 86.77289598401873],
            [-80, 86.74387478391728],
            [-79, 86.71331072492798],
            [-78, 86.6811407099926],
            [-77, 86.64729683980657],
            [-76, 86.61170601920955],
            [-75, 86.57428952088124],
            [-74, 86.53496250104337],
            [-73, 86.49363346107069],
            [-72, 86.4502036480208],
            [-71, 86.40456638600241],
            [-70, 86.35660632906095],
            [-69, 86.30619862477099],
            [-68, 86.25320797597544],
            [-67, 86.19748758603973],
            [-66, 86.13887797051301],
            [-65, 86.07720561514482],
            [-64, 86.01228145666288],
            [-63, 85.94389915847357],
            [-62, 85.87183314829532],
            [-61, 85.79583637851609],
            [-60, 85.71563776246114],
            [-59, 85.6309392304683],
            [-58, 85.54141233823789],
            [-57, 85.44669434579585],
            [-56, 85.34638366785614],
            [-55, 85.24003457443959],
            [-54, 85.12715099303666],
            [-53, 85.00717922874973],
            [-52, 84.87949937447775],
            [-51, 84.74341512633505],
            [-50, 84.59814164605565],
            [-49, 84.44279101657122],
            [-48, 84.27635471152989],
            [-47, 84.09768233346853],
            [-46, 83.90545565337584],
            [-45, 83.69815668459921],
            [-44, 83.47402811469026],
            [-43, 83.23102385309686],
            [-42, 82.96674666071787],
            [-41, 82.67836870309725],
            [-40, 82.36252924824069],
            [-39, 82.01520135364872],
            [-38, 81.63151583749718],
            [-37, 81.20552541614303],
            [-36, 80.72988344405432],
            [-35, 80.19539816704308],
            [-34, 79.59040109516322],
            [-33, 78.8998300610364],
            [-32, 78.10386007491219],
            [-31, 77.17578988683502],
            [-30, 76.07864678408183],
            [-29, 74.75945833299879],
            [-28, 73.1389714055247],
            [-27, 71.09164452574987],
            [-26, 68.40211972358817],
            [-25, 64.65344184877809],
            [-24, 58.84622866350711],
            [-23, 46.802559633811974],
            [-23, 12.81102574787252],
            [-24, -7.160339362963114],
            [-25, -19.124644574321305],
            [-26, -27.765868183342725],
            [-27, -34.422117601243905],
            [-28, -39.74216715839033],
            [-29, -44.10386710567096],
            [-30, -47.74932384570644],
            [-31, -50.84322530244948],
            [-32, -53.502400606285946],
            [-33, -55.81240373121892],
            [-34, -57.83749094624702],
            [-35, -59.62693997117516],
            [-36, -61.21921422134905],
            [-37, -62.644795991194776],
            [-38, -63.928165714868946],
            [-39, -65.08921606951604],
            [-40, -66.14428208854922],
            [-41, -67.10690442767454],
            [-42, -67.9884035059154],
            [-43, -68.79831725647179],
            [-44, -69.54473898009071],
            [-45, -70.23458100055262],
            [-46, -70.87378250809388],
            [-47, -71.46747493288662],
            [-48, -72.02011465702483],
            [-49, -72.53559036187309],
            [-50, -73.0173104988505],
            [-51, -73.46827505324057],
            [-52, -73.89113479873615],
            [-53, -74.28824051657642],
            [-54, -74.6616841087976],
            [-55, -75.01333312207741],
            [-56, -75.34485988259311],
            [-57, -75.6577661985437],
            [-58, -75.95340439757352],
            [-59, -76.23299531812039],
            [-60, -76.49764375697072],
            [-61, -76.7483517827711],
            [-62, -76.98603025146927],
            [-63, -77.2115088005],
            [-64, -77.42554455084446],
            [-65, -77.62882970745402],
            [-66, -77.82199821707017],
            [-67, -78.00563161674182],
            [-68, -78.18026418519888],
            [-69, -78.34638749180034],
            [-70, -78.50445442332366],
            [-71, -78.6548827568455],
            [-72, -78.79805833693231],
            [-73, -78.93433790695518],
            [-74, -79.06405163727793],
            [-75, -79.18750538710962],
            [-76, -79.30498273177002],
            [-77, -79.41674678283546],
            [-78, -79.52304182499283],
            [-79, -79.62409479031464],
            [-80, -79.72011658800852],
            [-81, -79.81130330540587],
            [-82, -79.8978372939875],
            [-83, -79.97988815254527],
            [-84, -80.05761361811044],
            [-85, -80.13116037400255],
            [-86, -80.20066478324713],
            [-87, -80.26625355464394],
            [-88, -80.32804434792251],
            [-89, -80.38614632368501],
            [-90, -80.44066064318619],
            [-91, -80.49168092243012],
            [-92, -80.53929364455908],
            [-93, -80.58357853406598],
            [-94, -80.62460889596485],
            [-95, -80.66245192270375],
            [-96, -80.69716897129015],
            [-97, -80.72881581281875],
            [-98, -80.75744285633925],
            [-99, -80.7830953487743],
            [-100, -80.80581355239143],
            [-101, -80.8256329011461],
            [-102, -80.84258413704117],
            [-103, -80.85669342748989],
            [-104, -80.8679824645235],
            [-105, -80.87646854654852],
            [-106, -80.88216464322961],
            [-107, -80.88507944395252],
            [-108, -80.88521739020511],
            [-109, -80.88257869210155],
            [-110, -80.87715932916304],
            [-111, -80.86895103536207],
            [-112, -80.85794126832579],
            [-113, -80.84411316248419],
            [-114, -80.8274454658375],
            [-115, -80.80791245990001],
            [-116, -80.78548386225566],
            [-117, -80.76012471103515],
            [-118, -80.73179523048591],
            [-119, -80.7004506766636],
            [-120, -80.66604116211626],
            [-121, -80.62851145826092],
            [-122, -80.58780077396935],
            [-123, -80.54384250867292],
            [-124, -80.49656397807405],
            [-125, -80.4458861102989],
            [-126, -80.39172311005215],
            [-127, -80.33398208802153],
            [-128, -80.2725626524341],
            [-129, -80.20735645927451],
            [-130, -80.13824671723721],
            [-131, -80.0651076429853],
            [-132, -79.98780386172523],
            [-133, -79.9061897474681],
            [-134, -79.8201086966165],
            [-135, -79.7293923276844],
            [-136, -79.63385959900556],
            [-137, -79.5333158351916],
            [-138, -79.42755165184482],
            [-139, -79.31634176658277],
            [-140, -79.19944368275665],
            [-141, -79.07659623030672],
            [-142, -78.94751794594703],
            [-143, -78.81190527224638],
            [-144, -78.66943055211229],
            [-145, -78.51973979159794],
            [-146, -78.36245015974053],
            [-147, -78.19714718917943],
            [-148, -78.02338163544435],
            [-149, -77.84066594585502],
            [-150, -77.64847028071897],
            [-151, -77.44621801965503],
            [-152, -77.2332806740715],
            [-153, -77.00897211264046],
            [-154, -76.77254198949566],
            [-155, -76.52316824414267],
            [-156, -76.25994851684224],
            [-157, -75.98189029239725],
            [-158, -75.68789954742536],
            [-159, -75.37676762950919],
            [-160, -75.0471560387264],
            [-161, -74.69757870990533],
            [-162, -74.32638130350148],
            [-163, -73.93171689894635],
            [-164, -73.51151733962259],
            [-165, -73.06345929382465],
            [-166, -72.5849238584078],
            [-167, -72.07294822392737],
            [-168, -71.52416751801852],
            [-169, -70.93474441436699],
            [-170, -70.30028339128131],
            [-171, -69.61572558046869],
            [-172, -68.87521886812074],
            [-173, -68.07195615850625],
            [-174, -67.19797228067539],
            [-175, -66.24388660522244],
            [-176, -65.19857357291407],
            [-177, -64.04873629370316],
            [-178, -62.778347999738195],
            [-179, -61.367910555015015],
            [-180, -59.79345530963462],
            [-180, 80.25145852957938],
          ],
        ],
        [
          [
            [168, 48.73541745112895],
            [169, 59.574602515569204],
            [170, 65.09352388014028],
            [171, 68.7074876130664],
            [172, 71.31930017592657],
            [173, 73.31656510805095],
            [174, 74.90247558320542],
            [175, 76.19659214147023],
            [176, 77.27488398883982],
            [177, 78.18837406714094],
            [178, 78.97280804645544],
            [179, 79.65407874144255],
            [180, 80.25145852957947],
            [180, -59.79345530963466],
            [179, -58.02517395872785],
            [178, -56.02550614160225],
            [177, -53.74640850307756],
            [176, -51.12535213171889],
            [175, -48.07926981155603],
            [174, -44.495041027843456],
            [173, -40.213768234757474],
            [172, -35.00297542260383],
            [171, -28.5024130927814],
            [170, -20.100941171130433],
            [169, -8.569899972445697],
            [168, 9.991867933978483],
            [168, 48.73541745112895],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: {
      datetime: "2023-10-01T07:00:00.000Z",
      elevation: -6,
    },
    type: "Feature",
  });
  expect(night("2023-10-01T07:00:00Z", { elevation: "nautical" })).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-180, 57.41970047393407],
            [-179, 59.529119095841835],
            [-178, 61.34335563579215],
            [-177, 62.92471674381275],
            [-176, 64.31799274802742],
            [-175, 65.55649596036075],
            [-174, 66.66567876940799],
            [-173, 67.665419407517],
            [-172, 68.57152847233748],
            [-171, 69.39677689967205],
            [-170, 70.15161800432583],
            [-169, 70.84470724237927],
            [-168, 71.48328434126381],
            [-167, 72.07345944258593],
            [-166, 72.62043084636781],
            [-165, 73.12865308547985],
            [-164, 73.60196832107987],
            [-163, 74.04371024375172],
            [-162, 74.45678708600522],
            [-161, 74.84374857057335],
            [-160, 75.2068403674061],
            [-159, 75.5480487390829],
            [-158, 75.86913740784343],
            [-157, 76.17167820334153],
            [-156, 76.45707669841322],
            [-155, 76.72659377619865],
            [-154, 76.98136387190617],
            [-153, 77.22241047945391],
            [-152, 77.45065939510039],
            [-151, 77.66695007825783],
            [-150, 77.87204543761565],
            [-149, 78.06664029378533],
            [-148, 78.25136872443326],
            [-147, 78.4268104616615],
            [-146, 78.59349648226237],
            [-145, 78.75191390788609],
            [-144, 78.9025103129685],
            [-143, 79.04569752256891],
            [-142, 79.18185496936847],
            [-141, 79.31133266842895],
            [-140, 79.43445385947986],
            [-139, 79.55151735914987],
            [-138, 79.6627996594093],
            [-137, 79.7685568033351],
            [-136, 79.86902606496075],
            [-135, 79.96442745630577],
            [-134, 80.05496508156325],
            [-133, 80.14082835577335],
            [-132, 80.22219310305327],
            [-131, 80.29922254751361],
            [-130, 80.37206820833217],
            [-129, 80.44087070902353],
            [-128, 80.50576050970729],
            [-127, 80.56685857010561],
            [-126, 80.6242769500741],
            [-125, 80.6781193536579],
            [-124, 80.72848162195918],
            [-123, 80.77545217948347],
            [-122, 80.81911243808791],
            [-121, 80.8595371621767],
            [-120, 80.89679479836455],
            [-119, 80.93094777245592],
            [-118, 80.9620527562525],
            [-117, 80.9901609064044],
            [-116, 81.01531807725289],
            [-115, 81.03756500937277],
            [-114, 81.0569374953037],
            [-113, 81.0734665237618],
            [-112, 81.08717840344134],
            [-111, 81.09809486734932],
            [-110, 81.106233158458],
            [-109, 81.11160609731631],
            [-108, 81.11422213212259],
            [-107, 81.11408537162734],
            [-106, 81.1111956011088],
            [-105, 81.10554828153853],
            [-104, 81.0971345319308],
            [-103, 81.08594109474632],
            [-102, 81.07195028409504],
            [-101, 81.05513991635678],
            [-100, 81.03548322270245],
            [-99, 81.0129487428629],
            [-98, 80.98750019934342],
            [-97, 80.959096351126],
            [-96, 80.92769082573189],
            [-95, 80.89323192833403],
            [-94, 80.8556624264102],
            [-93, 80.81491930820422],
            [-92, 80.77093351302386],
            [-91, 80.72362963113135],
            [-90, 80.67292557068117],
            [-89, 80.61873218882445],
            [-88, 80.56095288371732],
            [-87, 80.49948314374421],
            [-86, 80.43421004978131],
            [-85, 80.36501172577528],
            [-84, 80.29175673228512],
            [-83, 80.2143033969184],
            [-82, 80.13249907477312],
            [-81, 80.04617933105362],
            [-80, 79.95516703694236],
            [-79, 79.85927136855696],
            [-78, 79.75828669736804],
            [-77, 79.65199135876541],
            [-76, 79.54014628349748],
            [-75, 79.42249347440683],
            [-74, 79.29875430819861],
            [-73, 79.16862763880913],
            [-72, 79.03178767521024],
            [-71, 78.88788160206714],
            [-70, 78.73652690641751],
            [-69, 78.57730836728449],
            [-68, 78.40977465764739],
            [-67, 78.23343449920115],
            [-66, 78.04775229948018],
            [-65, 77.85214318777096],
            [-64, 77.64596735023014],
            [-63, 77.42852354503593],
            [-62, 77.19904165432429],
            [-61, 76.95667409989319],
            [-60, 76.70048591265692],
            [-59, 76.42944319955174],
            [-58, 76.14239969334962],
            [-57, 75.83808099702811],
            [-56, 75.5150660401403],
            [-55, 75.17176514346949],
            [-54, 74.80639393113591],
            [-53, 74.41694212377215],
            [-52, 74.00113597491233],
            [-51, 73.55639275052539],
            [-50, 73.0797651629508],
            [-49, 72.56787300327025],
            [-48, 72.01681829312676],
            [-47, 71.42207898172038],
            [-46, 70.77837436722312],
            [-45, 70.07949274348965],
            [-44, 69.31806781226638],
            [-43, 68.48528441667841],
            [-42, 67.57048488779373],
            [-41, 66.56063255615499],
            [-40, 65.43956477987207],
            [-39, 64.18692664242964],
            [-38, 62.7766033056485],
            [-37, 61.17433237977634],
            [-36, 59.33390668563413],
            [-35, 57.19079886155657],
            [-34, 54.65068079146298],
            [-33, 51.56670549857799],
            [-32, 47.68807270567252],
            [-31, 42.51618102749875],
            [-30, 34.70343955377579],
            [-30, -6.374116615400436],
            [-31, -16.183616443113248],
            [-32, -23.086613237046272],
            [-33, -28.4792791687605],
            [-34, -32.8977706425468],
            [-35, -36.62234066568867],
            [-36, -39.82323746292882],
            [-37, -42.6136029548281],
            [-38, -45.07325318302027],
            [-39, -47.26094135829698],
            [-40, -49.221317620180606],
            [-41, -50.98916828073225],
            [-42, -52.59214173299125],
            [-43, -54.05257782005335],
            [-44, -55.38877867766681],
            [-45, -56.61591705944307],
            [-46, -57.74670122194119],
            [-47, -58.791871581138516],
            [-48, -59.7605782386218],
            [-49, -60.66067234857222],
            [-50, -61.49893401574575],
            [-51, -62.281252677431006],
            [-52, -63.01277139917076],
            [-53, -63.69800341159891],
            [-54, -64.34092704689684],
            [-55, -64.94506369110728],
            [-56, -65.51354225487731],
            [-57, -66.0491528497761],
            [-58, -66.55439175268525],
            [-59, -67.03149928720387],
            [-60, -67.48249190716659],
            [-61, -67.90918950414824],
            [-62, -68.31323875749827],
            [-63, -68.69613318706232],
            [-64, -69.05923044441158],
            [-65, -69.40376728008015],
            [-66, -69.73087254603722],
            [-67, -70.04157852990322],
            [-68, -70.33683086687074],
            [-69, -70.61749723431379],
            [-70, -70.88437500068017],
            [-71, -71.13819797291023],
            [-72, -71.37964236412174],
            [-73, -71.60933208469358],
            [-74, -71.82784344443321],
            [-75, -72.0357093406351],
            [-76, -72.23342299605798],
            [-77, -72.42144130179418],
            [-78, -72.60018781236819],
            [-79, -72.77005543394357],
            [-80, -72.93140884103349],
            [-81, -73.0845866524406],
            [-82, -73.22990339316395],
            [-83, -73.36765126559364],
            [-84, -73.49810175037616],
            [-85, -73.62150705480597],
            [-86, -73.73810142441015],
            [-87, -73.84810233149977],
            [-88, -73.95171155281803],
            [-89, -74.04911614697852],
            [-90, -74.14048934113886],
            [-91, -74.22599133525658],
            [-92, -74.30577003131299],
            [-93, -74.37996169404296],
            [-94, -74.44869154896021],
            [-95, -74.51207432280577],
            [-96, -74.57021473095715],
            [-97, -74.62320791581202],
            [-98, -74.67113983968991],
            [-99, -74.71408763537258],
            [-100, -74.75211991702439],
            [-101, -74.7852970538868],
            [-102, -74.81367140882709],
            [-103, -74.83728754353156],
            [-104, -74.85618239186724],
            [-105, -74.8703854026871],
            [-106, -74.87991865312019],
            [-107, -74.88479693316803],
            [-108, -74.88502780221755],
            [-109, -74.88061161787539],
            [-110, -74.87154153733127],
            [-111, -74.8578034912595],
            [-112, -74.83937613007217],
            [-113, -74.81623074213728],
            [-114, -74.78833114337377],
            [-115, -74.75563353742228],
            [-116, -74.71808634537375],
            [-117, -74.67563000380336],
            [-118, -74.62819672961245],
            [-119, -74.57571024991532],
            [-120, -74.51808549491999],
            [-121, -74.45522825144232],
            [-122, -74.38703477434733],
            [-123, -74.3133913528371],
            [-124, -74.23417382808528],
            [-125, -74.14924705825403],
            [-126, -74.05846432641002],
            [-127, -73.96166668627426],
            [-128, -73.85868224008479],
            [-129, -73.74932534211361],
            [-130, -73.63339572054095],
            [-131, -73.51067750944058],
            [-132, -73.38093818154853],
            [-133, -73.24392737125055],
            [-134, -73.09937557581286],
            [-135, -72.94699272125509],
            [-136, -72.78646657739887],
            [-137, -72.61746100446871],
            [-138, -72.43961401113111],
            [-139, -72.25253560096208],
            [-140, -72.05580538097011],
            [-141, -71.84896990187337],
            [-142, -71.6315396952331],
            [-143, -71.4029859671514],
            [-144, -71.1627369018859],
            [-145, -70.91017352122661],
            [-146, -70.64462503657822],
            [-147, -70.36536362009981],
            [-148, -70.07159850860269],
            [-149, -69.76246933873936],
            [-150, -69.43703859375493],
            [-151, -69.09428301999279],
            [-152, -68.73308384452716],
            [-153, -68.35221559256733],
            [-154, -67.95033326313855],
            [-155, -67.52595757204853],
            [-156, -67.07745790978102],
            [-157, -66.60303258540748],
            [-158, -66.1006858315208],
            [-159, -65.5682009237631],
            [-160, -65.00310861395175],
            [-161, -64.40264987753409],
            [-162, -63.763731719645804],
            [-163, -63.08287444935649],
            [-164, -62.356148390643966],
            [-165, -61.57909741131996],
            [-166, -60.74664586001512],
            [-167, -59.852984422281736],
            [-168, -58.89142891470237],
            [-169, -57.85424394083732],
            [-170, -56.73242034129501],
            [-171, -55.51539101735218],
            [-172, -54.19066323857905],
            [-173, -52.74333569851198],
            [-174, -51.155453181581834],
            [-175, -49.405126851206624],
            [-176, -47.465306582645276],
            [-177, -45.30201916551722],
            [-178, -42.87175293120101],
            [-179, -40.117409467720975],
            [-180, -36.96169725398924],
            [-180, 57.41970047393407],
          ],
        ],
        [
          [
            [175, 35.69093864185896],
            [176, 43.11317512133683],
            [177, 48.120066458916774],
            [178, 51.90344855645459],
            [179, 54.92448846173137],
            [180, 57.41970047393409],
            [180, -36.961697253989286],
            [179, -33.29558367901665],
            [178, -28.95614665160134],
            [177, -23.67810089485336],
            [176, -16.96364326421592],
            [175, -7.573616311944795],
            [175, 35.69093864185896],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: {
      datetime: "2023-10-01T07:00:00.000Z",
      elevation: -12,
    },
    type: "Feature",
  });
  expect(night("2023-10-01T07:00:00Z", { elevation: "astronomical" })).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-179, 26.194488542458586],
            [-178, 33.33342719046196],
            [-177, 38.20849735521655],
            [-176, 41.97142387697743],
            [-175, 45.040720376781124],
            [-174, 47.62667453061749],
            [-173, 49.85310740643727],
            [-172, 51.800287414699014],
            [-171, 53.52373900522643],
            [-170, 55.063712470616615],
            [-169, 56.450438238743544],
            [-168, 57.70726047783259],
            [-167, 58.85261336141274],
            [-166, 59.90132425011742],
            [-165, 60.865504881074294],
            [-164, 61.755179546222685],
            [-163, 62.57873935181715],
            [-162, 63.343277981787786],
            [-161, 64.05484462342476],
            [-160, 64.71863767487919],
            [-159, 65.33915528164957],
            [-158, 65.92031385073848],
            [-157, 66.46554244285595],
            [-156, 66.97785874100659],
            [-155, 67.4599307712905],
            [-154, 67.91412748021246],
            [-153, 68.34256050643414],
            [-152, 68.74711892873665],
            [-151, 69.12949836291445],
            [-150, 69.49122547577781],
            [-149, 69.83367875513395],
            [-148, 70.15810620015937],
            [-147, 70.46564046256293],
            [-146, 70.75731186507254],
            [-145, 71.03405964260381],
            [-144, 71.29674168753603],
            [-143, 71.54614302979634],
            [-142, 71.78298324193867],
            [-141, 72.00792292683238],
            [-140, 72.22156941923296],
            [-139, 72.4244818110809],
            [-138, 72.61717539285256],
            [-137, 72.80012558888554],
            [-136, 72.97377145270549],
            [-135, 73.13851877851083],
            [-134, 73.29474287674846],
            [-133, 73.44279105482705],
            [-132, 73.5829848382338],
            [-131, 73.7156219624387],
            [-130, 73.84097816184337],
            [-129, 73.95930877851924],
            [-128, 74.07085021049024],
            [-127, 74.17582121675461],
            [-126, 74.2744240940433],
            [-125, 74.3668457384219],
            [-124, 74.45325860320769],
            [-123, 74.53382156325777],
            [-122, 74.60868069445203],
            [-121, 74.67796997612147],
            [-120, 74.74181192323019],
            [-119, 74.80031815429494],
            [-118, 74.85358990029574],
            [-117, 74.90171845918645],
            [-116, 74.94478560004099],
            [-115, 74.982863920356],
            [-114, 75.01601715957221],
            [-113, 75.04430047145844],
            [-112, 75.06776065762398],
            [-111, 75.0864363640775],
            [-110, 75.10035824243009],
            [-109, 75.10954907704001],
            [-108, 75.11402387911495],
            [-107, 75.11378994851994],
            [-106, 75.1088469037795],
            [-105, 75.09918668051048],
            [-104, 75.0847934982739],
            [-103, 75.06564379558363],
            [-102, 75.04170613255775],
            [-101, 75.01294106043918],
            [-100, 74.97930095694157],
            [-99, 74.9407298260945],
            [-98, 74.8971630609591],
            [-97, 74.84852716726314],
            [-96, 74.79473944565336],
            [-95, 74.73570762988138],
            [-94, 74.67132947781796],
            [-93, 74.60149231172531],
            [-92, 74.52607250369807],
            [-91, 74.44493490160386],
            [-90, 74.35793219020016],
            [-89, 74.2649041813675],
            [-88, 74.16567702656131],
            [-87, 74.0600623436327],
            [-86, 73.9478562490784],
            [-85, 73.8288382855327],
            [-84, 73.70277023287707],
            [-83, 73.56939478968536],
            [-82, 73.42843410980312],
            [-81, 73.27958817662852],
            [-80, 73.12253299506487],
            [-79, 72.95691857807341],
            [-78, 72.78236670119114],
            [-77, 72.59846839417773],
            [-76, 72.4047811339975],
            [-75, 72.2008256974552],
            [-74, 71.98608262480208],
            [-73, 71.75998823725283],
            [-72, 71.52193014130187],
            [-71, 71.271242140607],
            [-70, 71.00719846152568],
            [-69, 70.7290071805177],
            [-68, 70.43580271976306],
            [-67, 70.12663725044631],
            [-66, 69.80047080988228],
            [-65, 69.45615989724],
            [-64, 69.09244426073495],
            [-63, 68.70793152371132],
            [-62, 68.30107921387928],
            [-61, 67.87017365348088],
            [-60, 67.41330503064404],
            [-59, 66.92833779299951],
            [-58, 66.41287526888314],
            [-57, 65.8642171080042],
            [-56, 65.27930771196792],
            [-55, 64.65467325122334],
            [-54, 63.98634407322283],
            [-53, 63.26975819780255],
            [-52, 62.4996400177135],
            [-51, 61.669846035552936],
            [-50, 60.773166088151356],
            [-49, 59.80106340020386],
            [-48, 58.743328889948884],
            [-47, 57.58761252180547],
            [-46, 56.31877369844819],
            [-45, 54.917957104811265],
            [-44, 53.361236831884646],
            [-43, 51.617551913099454],
            [-42, 49.64541651351583],
            [-41, 47.38736863239256],
            [-40, 44.759881114920404],
            [-39, 41.63309054826845],
            [-38, 37.78374609557723],
            [-37, 32.757781297945755],
            [-36, 25.236738448789083],
            [-36, -5.726069226083766],
            [-37, -14.197051872997521],
            [-38, -20.080395972948995],
            [-39, -24.707105264135777],
            [-40, -28.541633955228924],
            [-41, -31.815904356969813],
            [-42, -34.66707335871332],
            [-43, -37.18484531647437],
            [-44, -39.43194769728508],
            [-45, -41.454381420764655],
            [-46, -43.28710055316623],
            [-47, -44.95740512122359],
            [-48, -46.4870888354439],
            [-49, -47.89386274550583],
            [-50, -49.192334940946324],
            [-51, -50.39470596245854],
            [-52, -51.51127544197194],
            [-53, -52.55081948562934],
            [-54, -53.520877188983754],
            [-55, -54.42797179886115],
            [-56, -55.27778392670495],
            [-57, -56.07528896075219],
            [-58, -56.824867328218794],
            [-59, -57.53039388065165],
            [-60, -58.19531102515368],
            [-61, -58.8226890577359],
            [-62, -59.41527631705325],
            [-63, -59.97554116573771],
            [-64, -60.505707354916396],
            [-65, -61.007783989549225],
            [-66, -61.483591056439344],
            [-67, -61.93478128114839],
            [-68, -62.36285892898641],
            [-69, -62.769196047547],
            [-70, -63.155046555788324],
            [-71, -63.5215585114501],
            [-72, -63.86978483021338],
            [-73, -64.20069268313728],
            [-74, -64.51517176103665],
            [-75, -64.81404156368345],
            [-76, -65.09805784655799],
            [-77, -65.36791833720646],
            [-78, -65.62426781619132],
            [-79, -65.86770264346002],
            [-80, -66.09877479915602],
            [-81, -66.3179954980155],
            [-82, -66.52583842819399],
            [-83, -66.72274265836063],
            [-84, -66.90911525096807],
            [-85, -67.08533361456338],
            [-86, -67.2517476237072],
            [-87, -67.40868153138825],
            [-88, -67.55643569566202],
            [-89, -67.69528813952158],
            [-90, -67.82549596065788],
            [-91, -67.94729660572911],
            [-92, -68.0609090219872],
            [-93, -68.16653469756405],
            [-94, -68.26435860036794],
            [-95, -68.35455002435307],
            [-96, -68.43726335087864],
            [-97, -68.51263873194914],
            [-98, -68.58080270130556],
            [-99, -68.64186871860419],
            [-100, -68.69593765126348],
            [-101, -68.7430981979692],
            [-102, -68.7834272572898],
            [-103, -68.81699024436885],
            [-104, -68.84384135821031],
            [-105, -68.86402380165904],
            [-106, -68.87756995579085],
            [-107, -68.88450151006062],
            [-108, -68.8848295492099],
            [-109, -68.87855459759912],
            [-110, -68.86566662130342],
            [-111, -68.84614498798767],
            [-112, -68.81995838425479],
            [-113, -68.78706468983395],
            [-114, -68.74741080764224],
            [-115, -68.70093244840548],
            [-116, -68.64755386816189],
            [-117, -68.5871875565854],
            [-118, -68.5197338736557],
            [-119, -68.44508063175432],
            [-120, -68.36310261978561],
            [-121, -68.27366106538705],
            [-122, -68.17660303071142],
            [-123, -68.07176073661141],
            [-124, -67.9589508093338],
            [-125, -67.83797344301802],
            [-126, -67.70861147037924],
            [-127, -67.57062933292328],
            [-128, -67.42377194086774],
            [-129, -67.2677634116093],
            [-130, -67.10230567405215],
            [-131, -66.9270769243657],
            [-132, -66.74172991672906],
            [-133, -66.54589007030427],
            [-134, -66.33915337099805],
            [-135, -66.12108404346012],
            [-136, -65.89121196514361],
            [-137, -65.64902979001917],
            [-138, -65.39398974457438],
            [-139, -65.12550005289313],
            [-140, -64.84292094072322],
            [-141, -64.54556016027682],
            [-142, -64.23266796780331],
            [-143, -63.90343147437884],
            [-144, -63.556968276453446],
            [-145, -63.19231925594433],
            [-146, -62.808440419388425],
            [-147, -62.404193621001276],
            [-148, -61.978335984328815],
            [-149, -61.52950780008796],
            [-150, -61.05621863191711],
            [-151, -60.556831304649364],
            [-152, -60.0295433781634],
            [-153, -59.472365619547574],
            [-154, -58.88309687144484],
            [-155, -58.25929456714035],
            [-156, -57.59823995237437],
            [-157, -56.89689682492191],
            [-158, -56.151862274415855],
            [-159, -55.3593074663298],
            [-160, -54.514905921424855],
            [-161, -53.613745930385484],
            [-162, -52.6502226154284],
            [-163, -51.61790355742192],
            [-164, -50.509359615786785],
            [-165, -49.31594920691441],
            [-166, -48.02753926376475],
            [-167, -46.632138341108515],
            [-168, -45.11540505127114],
            [-169, -43.45997493720157],
            [-170, -41.644514807585814],
            [-171, -39.642353122906556],
            [-172, -37.41942218094058],
            [-173, -34.931023697432224],
            [-174, -32.11644894279131],
            [-175, -28.889351267626992],
            [-176, -25.118737711595276],
            [-177, -20.585799776921025],
            [-178, -14.86182448587081],
            [-179, -6.782778914337739],
            [-179, 26.194488542458586],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2023-10-01T07:00:00.000Z", elevation: -18 },
    type: "Feature",
  });
  expect(night("2023-10-01T07:00:00Z", { elevation: -24 })).toEqual({
    geometry: {
      coordinates: [
        [
          [
            [-173, 21.02760239408932],
            [-172, 27.631938029780887],
            [-171, 32.164996084636684],
            [-170, 35.70414134000114],
            [-169, 38.625325459560436],
            [-168, 41.11452142944592],
            [-167, 43.280466911126894],
            [-166, 45.193473937611365],
            [-165, 46.90219041574248],
            [-164, 48.44195372353575],
            [-163, 49.83939178761929],
            [-162, 51.11515256019377],
            [-161, 52.28561893556978],
            [-160, 53.36403674277458],
            [-159, 54.36128497796395],
            [-158, 55.28641838102026],
            [-157, 56.14705983393881],
            [-156, 56.94969061140551],
            [-155, 57.69986929851461],
            [-154, 58.402399740731774],
            [-153, 59.061461838058115],
            [-152, 59.68071476688905],
            [-151, 60.263379414982694],
            [-150, 60.812304921400916],
            [-149, 61.33002290585935],
            [-148, 61.818792052712915],
            [-147, 62.28063505785945],
            [-146, 62.71736947029026],
            [-145, 63.130633609579654],
            [-144, 63.52190847967495],
            [-143, 63.892536402813754],
            [-142, 64.24373694779162],
            [-141, 64.57662061179458],
            [-140, 64.89220062579103],
            [-139, 65.19140318367057],
            [-138, 65.4750763402673],
            [-137, 65.74399777966714],
            [-136, 65.99888162020721],
            [-135, 66.24038439439532],
            [-134, 66.46911031914806],
            [-133, 66.6856159531341],
            [-132, 66.89041432276376],
            [-131, 67.08397858580068],
            [-130, 67.26674529117318],
            [-129, 67.43911728491003],
            [-128, 67.60146630489828],
            [-127, 67.75413530109118],
            [-126, 67.8974405126822],
            [-125, 68.03167332943303],
            [-124, 68.15710196066638],
            [-123, 68.27397293229777],
            [-122, 68.3825124295944],
            [-121, 68.48292750104045],
            [-120, 68.57540713669295],
            [-119, 68.66012323268787],
            [-118, 68.73723145204907],
            [-117, 68.80687199064049],
            [-116, 68.86917025594536],
            [-115, 68.9242374653372],
            [-114, 68.97217116960037],
            [-113, 69.01305570664842],
            [-112, 69.04696258965917],
            [-111, 69.07395083318373],
            [-110, 69.09406722017998],
            [-109, 69.10734651236176],
            [-108, 69.1138116057301],
            [-107, 69.11347363265709],
            [-106, 69.10633201141796],
            [-105, 69.09237444360464],
            [-104, 69.07157685939742],
            [-103, 69.0439033102173],
            [-102, 69.00930580781593],
            [-101, 68.96772410838491],
            [-100, 68.9190854397669],
            [-99, 68.86330416932402],
            [-98, 68.8002814094544],
            [-97, 68.72990455713679],
            [-96, 68.65204676321522],
            [-95, 68.56656632639839],
            [-94, 68.47330600613114],
            [-93, 68.37209224757677],
            [-92, 68.26273431091786],
            [-91, 68.14502329601338],
            [-90, 68.01873105211692],
            [-89, 67.88360896083763],
            [-88, 67.73938657877241],
            [-87, 67.58577012421667],
            [-86, 67.42244079001595],
            [-85, 67.24905286189453],
            [-84, 67.06523161840991],
            [-83, 66.87057098494695],
            [-82, 66.66463090976495],
            [-81, 66.44693442491187],
            [-80, 66.21696434864621],
            [-79, 65.97415957864976],
            [-78, 65.71791091650503],
            [-77, 65.44755635331654],
            [-76, 65.1623757335505],
            [-75, 64.86158469861859],
            [-74, 64.54432779274413],
            [-73, 64.20967059034251],
            [-72, 63.856590675362206],
            [-71, 63.48396726726789],
            [-70, 63.090569243613096],
            [-69, 62.67504125280152],
            [-68, 62.235887539135035],
            [-67, 61.77145301077946],
            [-66, 61.27990096327721],
            [-65, 60.75918671758586],
            [-64, 60.20702622957482],
            [-63, 59.62085845936081],
            [-62, 58.997799927762856],
            [-61, 58.334589395464405],
            [-60, 57.6275199216935],
            [-59, 56.8723546079882],
            [-58, 56.06422097730485],
            [-57, 55.19747697208294],
            [-56, 54.265538642639974],
            [-55, 53.260655185827325],
            [-54, 52.1736101388329],
            [-53, 50.99331656844222],
            [-52, 49.70625596942694],
            [-51, 48.29567945405985],
            [-50, 46.74043391204486],
            [-49, 45.01316999492906],
            [-48, 43.07747527947247],
            [-47, 40.883010049702975],
            [-46, 38.356599784123745],
            [-45, 35.3841483885962],
            [-44, 31.76800900289254],
            [-43, 27.099320921474522],
            [-42, 20.13493065036101],
            [-42, -5.156587495558492],
            [-43, -12.666614324849435],
            [-44, -17.83871986829297],
            [-45, -21.9205727045496],
            [-46, -25.324926638841777],
            [-47, -28.2528026491211],
            [-48, -30.82123522496746],
            [-49, -33.10596934023101],
            [-50, -35.15960276483982],
            [-51, -37.020539380965474],
            [-52, -38.71789139368536],
            [-53, -40.274377856269005],
            [-54, -41.70814325459382],
            [-55, -43.03395373346516],
            [-56, -44.26401485737703],
            [-57, -45.40854882483093],
            [-58, -46.4762130366405],
            [-59, -47.47441069564035],
            [-60, -48.409525916203144],
            [-61, -49.28710479971946],
            [-62, -50.111997030936855],
            [-63, -50.88846810138722],
            [-64, -51.62028932375628],
            [-65, -52.310810809895074],
            [-66, -52.963021209834295],
            [-67, -53.57959704148153],
            [-68, -54.16294374835839],
            [-69, -54.71523011983085],
            [-70, -55.23841733787575],
            [-71, -55.734283638110995],
            [-72, -56.20444536427371],
            [-73, -56.65037503622696],
            [-74, -57.0734169289787],
            [-75, -57.47480056484686],
            [-76, -57.85565244611102],
            [-77, -58.217006296345296],
            [-78, -58.559812031505224],
            [-79, -58.88494364403636],
            [-80, -59.193206152737396],
            [-81, -59.48534174629887],
            [-82, -59.762035228155824],
            [-83, -60.023918853622206],
            [-84, -60.27157663650094],
            [-85, -60.505548190925225],
            [-86, -60.72633216464477],
            [-87, -60.93438931197222],
            [-88, -61.130145247873116],
            [-89, -61.313992918991715],
            [-90, -61.486294822574614],
            [-91, -61.64738500013859],
            [-92, -61.79757082920698],
            [-93, -61.93713463341551],
            [-94, -62.06633512868114],
            [-95, -62.18540872087009],
            [-96, -62.2945706684405],
            [-97, -62.394016121822816],
            [-98, -62.48392104980086],
            [-99, -62.564443061833714],
            [-100, -62.63572213408882],
            [-101, -62.697881245914935],
            [-102, -62.75102693254798],
            [-103, -62.79524975900256],
            [-104, -62.83062471933382],
            [-105, -62.85721156475321],
            [-106, -62.875055063429336],
            [-107, -62.88418519419777],
            [-108, -62.88461727582507],
            [-109, -62.87635203292089],
            [-110, -62.859375599053266],
            [-111, -62.8336594570939],
            [-112, -62.79916031629],
            [-113, -62.75581992502392],
            [-114, -62.7035648176704],
            [-115, -62.64230599338671],
            [-116, -62.57193852406623],
            [-117, -62.49234108803945],
            [-118, -62.40337542540903],
            [-119, -62.304885710147246],
            [-120, -62.196697833248386],
            [-121, -62.078618590306036],
            [-122, -61.9504347658538],
            [-123, -61.811912105651395],
            [-124, -61.662794166792494],
            [-125, -61.502801034029176],
            [-126, -61.33162788901814],
            [-127, -61.148943417259844],
            [-128, -60.954388035275784],
            [-129, -60.74757191800009],
            [-130, -60.52807280338195],
            [-131, -60.29543354772768],
            [-132, -60.04915940125902],
            [-133, -59.788714968611316],
            [-134, -59.51352081339766],
            [-135, -59.222949659344636],
            [-136, -58.916322132645334],
            [-137, -58.592901980800775],
            [-138, -58.25189069198912],
            [-139, -57.8924214254828],
            [-140, -57.51355214728128],
            [-141, -57.114257845239045],
            [-142, -56.69342167365624],
            [-143, -56.24982484739624],
            [-144, -55.782135068592346],
            [-145, -55.28889322292018],
            [-146, -54.768498024606146],
            [-147, -54.2191882162978],
            [-148, -53.639021836882364],
            [-149, -53.02585195081339],
            [-150, -52.37729807754022],
            [-151, -51.69071235671763],
            [-152, -50.963139216315824],
            [-153, -50.19126695117155],
            [-154, -49.371369131964165],
            [-155, -48.49923309436446],
            [-156, -47.57007182277329],
            [-157, -46.57841421600479],
            [-158, -45.517966804697664],
            [-159, -44.38143716264416],
            [-160, -43.160304989320245],
            [-161, -41.84452024253052],
            [-162, -40.422097193834375],
            [-163, -38.87855599322407],
            [-164, -37.19613379309986],
            [-165, -35.35263474158258],
            [-166, -33.31968895125868],
            [-167, -31.059991890822666],
            [-168, -28.52266600288445],
            [-169, -25.634862158018464],
            [-170, -22.28494367697033],
            [-171, -18.283610202316797],
            [-172, -13.251072796022461],
            [-173, -6.1055186850842755],
            [-173, 21.02760239408932],
          ],
        ],
      ],
      type: "MultiPolygon",
    },
    properties: { datetime: "2023-10-01T07:00:00.000Z", elevation: -24 },
    type: "Feature",
  });
});
