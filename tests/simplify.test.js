const {
    rdp
} = require("../dist/simplify.js");

it("rdp", () => {
    const ring = [
        [0, 30],
        [1, 30.5],
        [4, 30],
        [6, 30.2],
        [8, 30.1],
        [9, 30.15],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [25, 54],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 50],
        [-24, 47],
        [-24, 44],
        [-24, 41],
        [-24, 38],
        [0, 30]
    ];
    expect(rdp(ring)).toEqual([
        [0, 30],
        [1, 30.5],
        [4, 30],
        [6, 30.2],
        [8, 30.1],
        [9, 30.15],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [25, 54],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        threshold: 0.1
    })).toEqual([
        [0, 30],
        [1, 30.5],
        [4, 30],
        [6, 30.2],
        [9, 30.15],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [25, 54],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        limit: 12
    })).toEqual([
        [0, 30],
        [1, 30.5],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [25, 54],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        area: true,
    })).toEqual([
        [0, 30],
        [1, 30.5],
        [4, 30],
        [9, 30.15],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [25, 54],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        area: true,
        limit: 10
    })).toEqual([
        [0, 30],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        area: true,
        threshold: 0.01
    })).toEqual([
        [0, 30],
        [12, 29.5],
        [40, 40],
        [23, 40],
        [27, 55],
        [20, 57],
        [0, 52],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        area: true,
        threshold: 0.1
    })).toEqual([
        [0, 30],
        [40, 40],
        [23, 40],
        [20, 57],
        [-24, 53],
        [-24, 38],
        [0, 30]
    ]);
    expect(rdp(ring, {
        area: true,
        threshold: 0
    })).toEqual(ring);
    expect(rdp([
        [0, 30],
        [0.1, 30.05],
        [0.4, 30],
        [0.6, 30.02],
        [0.8, 30.01],
        [0.9, 30.015],
        [1.2, 29.95],
        [4, 31],
        [2.3, 31],
        [2.7, 32.5],
        [2.5, 32.4],
        [2, 32.7],
        [0, 32.2],
        [-2.4, 32.3],
        [-2.4, 32],
        [-2.4, 31.7],
        [-2.4, 31.4],
        [-2.4, 31.1],
        [-2.4, 30.8],
        [0, 30]
    ], {
        area: true
    })).toEqual([
        [0, 30],
        [0.1, 30.05],
        [0.4, 30],
        [0.9, 30.015],
        [1.2, 29.95],
        [4, 31],
        [2.3, 31],
        [2.7, 32.5],
        [2.5, 32.4],
        [2, 32.7],
        [0, 32.2],
        [-2.4, 32.3],
        [-2.4, 30.8],
        [0, 30]
    ]);
});